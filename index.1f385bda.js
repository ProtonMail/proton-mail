!function(e){function t(t){for(var r,o,i=t[0],u=t[1],s=t[2],l=0,m=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(f&&f(t);m.length;)m.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},c=[];var o={3:"sha384-auv5raHAo689dEAfAKYlDChhRbUYdb7zNcuZOz7Pg3a/8TqCkJ+nkB8r8NU0isXU",4:"sha384-LS2hQybDpkkrRQxxafTaiWptayIFmHcUlw8KvXG0z97sBVsc8XYa2sexGw1t3NYq",5:"sha384-4ctapNInUn5xWFFQYV3tmXyFRHDausK2qhpBSadSZag3/ZnUiMC+M3t/9hJnAePg",6:"sha384-NAhHN8lO8+G6RTdDYMyhCUTjFugf+OzpIsPi+KhcZseZwDaejx4rAmL46ApQ5pWT",7:"sha384-lE1tcH7AwwsG943bAHvpQvTqMpbDl4E2BZvgE161oie/XftgMBgSMY6cy4vM6qvM",8:"sha384-7aRTxeY7CBMwM+XC/QqLM1Se9soVYW2O7TJurZ90VnwW3jklyhLhmqAw29f2afpy",9:"sha384-y0h5uRPbF/sdYfQhge37FW/INoSb3YDZDYus6mLpLWx+EGRUHrGEzcfe82K2B6D3",10:"sha384-wzhWTayHcA44X4dy1swGUXcUWOIMmVR79VULkVMOuNQ2di098ANZCsYAmbSQf0bV",11:"sha384-BLN9t4WPVcTF6WyQQXV845srDZEmLbeo5q0r600/iuUps4ks3c7Y3PMmpkX2oDk2",12:"sha384-vLw3+/TR6MnbhNnKXP9F6L42qJQUZkS2XzF5T16QSbIvswtbZues0FuE7y0/nMlM",13:"sha384-wFqxjC1Bg2DYqZU1wWrqRzETnwcxHbayMha8KfRFa6M058Sgk4meXeqh5ivHOV37",14:"sha384-TJliOPqagEqHwJFvCQT6n/S/8DG3Dl76JS++cB7/d/SdasXwjVsTk3p2P6Zz6hHw",15:"sha384-VXcEKglQfmgx8dkhELikdy9sogXGBzuWOBxS/96DdDzjEl2Ov8vPZmXlPzfhWB26",16:"sha384-VtT1ymnVt2ayiQpdzM9KYeEEOBExuDKv12YQOIp6ONA6ri6uTSBRJgatPOlyMMHm",17:"sha384-xUwPshd4hT31QQ+vP+N1GZhVb53iQmxYdkrY6749U/NSeS0YGVtkyHSiuJCh9uZ1",18:"sha384-gnn+EHJNH/L6nwYTAV0D+iiw56awzJSpuI9bge2bvAFwdkPF3xIsp/BvAH+UYhgJ",19:"sha384-v4e25oSxSxsZOE9qpOobBLv/vMiuohns7tHhBQ1Ux5tVgtEsS6USXx6CP3XOUt7P",20:"sha384-VSutkKDcJz/m4VPyqne7dyAwG9NLazmHjeRIPEq5lVoHI2yPhJkKuqatBJbhEdk7",21:"sha384-Y6L9X3cyDWXbdFxWcRu1UtyVkDPx+Q50h+1PczeBxlvbKGxNnrjGs2A0YttVxeKQ",22:"sha384-5kiECMawwObQ8kyru2Ecab3mCHYJH+4ZE60fQ3mQnu3gdsvnAQBV/yZm6RzH7gQH",23:"sha384-8pisBM6AzfehkAeL6eg2cbJ03HLlFL0cf3P9mhAnfHKOsc5AwMOGtsgR64mBjbg4",24:"sha384-9kh/4L3FlEh80LXOvg0frbWT3joA0boqF9E5RxKE3To4/AlrfNve43CMIdP7qexN",25:"sha384-sLVH9JJOFcx8jjnKnIoD7TJ6XtSXEhvC+Ghl0y520fpHu2LDCk/tkHACN+9TDOow",26:"sha384-9lm7HvTZBdkAON1DiQAXGAMOkmR64B8XwTEl8+XjzHn6JTfg3c8TYl7yLkI1dfay",27:"sha384-CIpJbS49w3x3zt9d0ByJhBPoLOq8vgg5mpYVT7BnnGon3sBtuGht+CTuntWMzRaQ",28:"sha384-2zvEuN82LRnYtEl47dGMI9NFGdK+HRxXCNMO9UjH1DbmLNzxQynf32lwgl7Gesuc",29:"sha384-nIsY5oo4finGd66QLzA3CzjE9VUGtlfvh60IKwOUZcbjG/qtA3B09QKsyL00KKsG",30:"sha384-0W86QpdM2664KkhxLPsxWWbwkv6j3Yv4IhEZa6q7IroQI9RoBNgYGhB53dAMIQqk",31:"sha384-qvvYrdCMqW/1zlUAHekLb4sKmoC+NsZ2Dxt9wQ3kDm6rE5A/G0BGcrCCsDNdxPqo",32:"sha384-lfPR1chCLPnLwiKCFaennyjEBoUaDqjlaYBziNkDyHm5h/fj/ijnharDNOI+bVSy",33:"sha384-+oAGD1YGid2lpxDxBcOc81VNIx9y5tchZk5dYi9lSmPzu83aJPePUFuJxFvRq9KC",34:"sha384-6Ejxri/Mdk+n5vImVg3cO5xioVRX0U9HJ6d9BEs+ETvuNxHMH6qZ9hqYEi1xwelV",35:"sha384-X2Yzvr/y52eJ27E2xd4kSTGKEqJxFlzBeTqWOiVsjbyucWVDTGU/wROaxY9teALJ",36:"sha384-8ax4JuJhSwkNh0pYE5AVhsowDbX4YINcFr7O4Z9W7pw2CU95EqyE8sp9SY9Dcumm",37:"sha384-BwCF/KnfS2j8jX7BzEthVH6pHy3xAD6i8/N/lAB+sIsNmaSmCh4Tx5hNr4S86lOP",38:"sha384-Kq4GWcD4ftF6dEBTyHUyyBDsSTi0bgHe0H1DkbjTFANDE4+9f5pRzGIDGSiXKhHP",39:"sha384-DcBSM38C/yWcXcTP3sVeySWxGoqJetlfIVKWrTvKy1MpGWTqR0HxneGFp12VfwuO",40:"sha384-Asd9nRAREK0LjeXb06F2BALl9HrhH4p+mhTLZS8hl/AsjpukdpF3LgRrbv7uGGDC",41:"sha384-zQHOBd+pblevE01bUcRJ8mhlbKTFi+abCNANC4Ly/RNjslM4ZtC38CSm5EaO19ci",42:"sha384-8wxuJw5QKWlkMrDqo8U9YR74vHYDGS/3tac7xy2KLMPYE7TTAMCbA6jDacBDF9gV",43:"sha384-j3WC9pJzlfoDkd7zHqweP592GyKMU8oOjtKJjrLH0gDYm3InFcpRxs7zOetZy8YD",44:"sha384-t27XxpK6gBT8VN2nYlaLT985TcVo/8fa9/426UGTMEkN12gKmzNz2sU5TtcvLBSq",45:"sha384-hPtmOiQqRaKn5vLF3BJu0vYhESOJPM3DzC6WiaONd9zWY4cg0+E0cDkvp81Z4jcH",46:"sha384-NBmxjrDKcuiFVIh0mkzVyvTlZAeXFuw0tdjJwte0dtqtC3Fc/LR63U7ISMvWdvQE",47:"sha384-4Qv1c+qzd6Mb9aC9GoN8jTYVsAWtvY+rs7H3zlWlupRODOWbk6aE23PP4v/icP/i",48:"sha384-graAkrwusxKUjPi7Y1zu4pBTuVXlZZvYL1TS8X3f11FocLdTRn62bg8FPh5439s3",49:"sha384-5MM2vIMzBmTwbXRndA6oqm/kY/rfNaErbSbIZ71dSbYJgy5ubCBZ/vQhCvuKuvpi",50:"sha384-HEI+eXJEWHNdxkbPmRYjku4dRRmziYZw9etp3gR3t02/EI/THyDoeO/tCjtfO8zX",51:"sha384-urf6BZKTQa5bI0DhdN6EKFqOLr1JnlCgm5ud4Vt6dc67dNi9PC3E4oj2Ovtzi0EK",52:"sha384-WRSNNrkFGIgW1zNVcievoZE7S9ABydIVPRhN5GzpdehQI/XheP9N7Xr5Zz7pyWLS",53:"sha384-KZFFeyA6WW0utr+ied6qRorjavBDi49DCj3aRz3jHIO5n6t9slKZt7bUSJ9prN9v",54:"sha384-4N/P59bWNWgJ3XDPg2fia6mycIRf8bp/N+sayM+DM2D9+d6pGv1brR3nnR/cEEF1",55:"sha384-ljyX0Ym1Ivi51kIEZpfgK5oQEjiz6PaxNLCyOvob2K2mRgm7EjOOwewX5n1I8Dpm",56:"sha384-kL/uHjCWj9i/mWGs0h+LnWCYnr0QedgqhAILqyz50LgSRH5+oCWFMBz9SfV4Z+/G",57:"sha384-l7dgOvqVlD58gq4wN86PSj9RAREtTFX708osBFhCAg4WVD6Z9PAi35CK/9EwC46J",58:"sha384-uKFX9TKxt25sbQBEev+5Tw5+LNiCXoF2OuLbndudYCKQPYHFicZahiQAjdM+rOBW",59:"sha384-XRlBiHHTeRL1+U0jqO5D0q4BYEypn6FaTD7YHHpE9lYSSCUk1OLeYq3O21z4ertz",60:"sha384-zkNNkpc12zeGbhu4oiNCv9bFUi//vsgFE3+2I+77dMIW5yOQAtATViyyjQmn3FuR",61:"sha384-i/FSm7Ul74RdCvbVpJTx28mOGJQC266/QlrtOq+PwDWp1mVkvu3zY35XXgVzfYfE",62:"sha384-YVZYUkVqSfAkFpbp29yVezOXrihSaBzkI4YVfA1tFaecqRw4O9+gCQX5eIGtAojq",63:"sha384-VIs+F/4pqHg3658uuihjFdKcBjO0rb3Cg/Hk83fIdJgnAEguSQ8le7GgHZgs6Sj5",64:"sha384-N0D1fPy6BNOHFWPcsoZUM6VK/PXa0QT+bQ9jMRY4vq1ERckkwLuUtmaCc5eqhmY0"};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+""+({}[e]||e)+"."+{3:"36cf4565",4:"efbc60ce",5:"c1fcdfe2",6:"29b7c3cf",7:"922cca9b",8:"a4e79e54",9:"9662eded",10:"ef49039b",11:"0f0ca976",12:"940c95bb",13:"0c9f89fc",14:"257e00d8",15:"b2f55cf5",16:"990998ca",17:"392200d1",18:"2797989b",19:"d8b72522",20:"4b561d21",21:"d8c1d2d4",22:"63d0de1a",23:"0c02deb1",24:"2187205e",25:"7a8ff82e",26:"0d1eaf12",27:"be0e40e3",28:"a8a4d285",29:"60e24796",30:"281cc2a7",31:"a7e94fdf",32:"bfdaaaed",33:"e3a90ee0",34:"2e9dcee6",35:"6024e4f3",36:"25dde75a",37:"b98f0f12",38:"b44539c8",39:"3884ecbf",40:"f34a315c",41:"478581bb",42:"33af0238",43:"bc4be8c9",44:"a333e78a",45:"27811fb0",46:"5599d7db",47:"ae131405",48:"776ae66b",49:"d60c2695",50:"2b7210eb",51:"e1defbcc",52:"4e61b637",53:"05e97415",54:"232cf4ac",55:"4b0ccdf3",56:"c151830d",57:"4b313b11",58:"3babf77d",59:"16e299f0",60:"fd80f20b",61:"09f55480",62:"85c8d1b0",63:"cbae8aa4",64:"9881fef5"}[e]+".chunk.js"}(e),0!==u.src.indexOf(window.location.origin+"/")&&(u.crossOrigin="anonymous");var s=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",s.name="ChunkLoadError",s.type=r,s.request=c,n[1](s)}a[e]=void 0}};var l=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,u.integrity=o[e],u.crossOrigin="anonymous",document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=s;c.push([0,2]),n()}({"+wUL":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"CLIENT_ID",(function(){return f})),n.d(r,"CLIENT_TYPE",(function(){return m})),n.d(r,"CLIENT_SECRET",(function(){return d})),n.d(r,"APP_VERSION",(function(){return p})),n.d(r,"APP_NAME",(function(){return v})),n.d(r,"API_URL",(function(){return b})),n.d(r,"SECURE_URL",(function(){return g})),n.d(r,"LOCALES",(function(){return h})),n.d(r,"API_VERSION",(function(){return E})),n.d(r,"DATE_VERSION",(function(){return O})),n.d(r,"CHANGELOG_PATH",(function(){return j})),n.d(r,"VERSION_PATH",(function(){return x})),n.d(r,"SENTRY_RELEASE",(function(){return y})),n.d(r,"SENTRY_DSN",(function(){return w}));n("pNMO"),n("4Brf"),n("tjZM"),n("3I1R"),n("7+kd"),n("0oug"),n("KhsS"),n("gOCb"),n("a57n"),n("GXvd"),n("I1Gw"),n("gXIK"),n("lEou"),n("gbiT"),n("ma9I"),n("qHT+"),n("piMb"),n("yyme"),n("TeQF"),n("fbCW"),n("x0AG"),n("BIHw"),n("XbcX"),n("QWBl"),n("pjDv"),n("yq1k"),n("yXV3"),n("4mDm"),n("oVuX"),n("uqXc"),n("2B1R"),n("Xe3L"),n("E9XD"),n("9N29"),n("Junv"),n("+2oP"),n("Rfxz"),n("ToJy"),n("94Xl"),n("pDQq"),n("QGkA"),n("c9m3"),n("wZ/5"),n("gtqK"),n("rOQg"),n("tCCV"),n("rMz7"),n("9LPj"),n("7+zs"),n("DQNa"),n("tW5y"),n("sMBO"),n("DEfu"),n("Tskq"),n("Uydy"),n("eajv"),n("n/mU"),n("PqOI"),n("QNnp"),n("/5zm"),n("CsgD"),n("9mRW"),n("QFcT"),n("vAFs"),n("a5NK"),n("yiG3"),n("kNcU"),n("KvGi"),n("AmFO"),n("eJiR"),n("I9xj"),n("tl/u"),n("qePV"),n("NbN+"),n("8AyJ"),n("i6QF"),n("kSko"),n("WDsR"),n("r/Vq"),n("5uH8"),n("w1rZ"),n("JevA"),n("toAj"),n("VC3L"),n("zKZe"),n("Eqjn"),n("HRxU"),n("eoL8"),n("5xtp"),n("T63A"),n("3KgV"),n("wfmh"),n("5DmW"),n("27RR"),n("cDke"),n("NBAS"),n("Kxld"),n("yQYn"),n("4h0Y"),n("5D5o"),n("tkto"),n("v5b1"),n("W/eh"),n("zuhW"),n("r5Og"),n("ExoC"),n("07d7"),n("B6y2"),n("rNhl"),n("4l63"),n("5s+n"),n("p532"),n("pv2x"),n("SuFq"),n("PzqY"),n("rBZX"),n("XUE8"),n("nkod"),n("f3jH"),n("x2An"),n("25bX"),n("G/JM"),n("1t3B"),n("ftMj"),n("i5pp"),n("TWNs"),n("rB9j"),n("U3f4"),n("JfAA"),n("YGK4"),n("9bJ7"),n("inlA"),n("9tb/"),n("JTJg"),n("PKPk"),n("Rm1S"),n("hDyC"),n("TZCg"),n("2A+d"),n("OM9Z"),n("UxlC"),n("hByQ"),n("EnZy"),n("LKBx"),n("SYor"),n("HiXI"),n("7ueG"),n("GKVU"),n("E5NM"),n("BNMt"),n("zHFu"),n("x83w"),n("l2dK"),n("GRPF"),n("xdBZ"),n("mRH6"),n("yWo2"),n("IxXR"),n("TFPT"),n("Zk8X"),n("z8NH"),n("SpvK"),n("/Yfv"),n("iwkZ"),n("FDzp"),n("XMab"),n("ilnZ"),n("hMMk"),n("+ywr"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("IL/d"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("7JcK"),n("ypFw"),n("JaFt"),n("zSZm"),n("PF2M"),n("KVSy"),n("ZJ55"),n("IZzc"),n("Fwt+"),n("s5qe"),n("cvf0"),n("ENF9"),n("H+LF"),n("FZtP"),n("3bBZ"),n("Ew+T"),n("n5b4"),n("Kz25"),n("vxnP"),n("mGGf");var a=n("i8i4"),c=n.n(a),o=n("q1tI"),i=n.n(o),u=(n("ls82"),n("zeKp"),n("wSuE")),s=n("sQ7P"),l=n("U0S0"),f="WebMail",m=1,d="",p="1.0.0",v="proton-mail",b="https://protonmail.blue/api",g="https://secure.protonmail.blue",h={},E="3",O="Mon, 06 Jan 2020 15:32:32 GMT",j="assets/changelog.tpl.html",x="assets/version.json",y="",w="",N=n("pVnL"),k=n.n(N),A=n("2INN"),C=n("LTi8"),D=n("mBH9"),S=n("pW7U"),L=n("KfXF"),I=n("1VMB"),T=n("3s0w"),P=n("p2/2"),R=n("Y8zs"),M=n("XTKM"),B=n("neWn"),F=n("dTS7"),z=F.keys().reduce((function(e,t){return e[t.slice(2,t.length-5)]=function(){return F(t)},e}),{}),U=n("J4zp"),_=n.n(U),K=n("D5Se"),H=n("FZZp"),V=n("VjqJ"),X=n("ImWu"),G=n("VkAN"),W=n.n(G),Y=n("whF5"),q=n("kJz7"),J=n("6UvI"),Q=n("fa3+"),Z=n("P2jq"),$=n("LKB7"),ee=n("nitM"),te=n("llAM"),ne=n("VjF5"),re=n("+4In"),ae=n("c47Q"),ce=n("domY"),oe=n("SOA7"),ie=n("N81o"),ue=n("lSNA"),se=n.n(ue),le=n("gPo3"),fe=n("lebJ"),me=n("Md23"),de=n("dVIL"),pe=n("SI5Q"),ve=n("/z5T"),be=n("bf08");function ge(){var e=W()(["Search"]);return ge=function(){return e},e}function he(){var e=W()(["Attachments"]);return he=function(){return e},e}function Ee(){var e=W()(["Address"]);return Ee=function(){return e},e}function Oe(){var e=W()(["End date"]);return Oe=function(){return e},e}function je(){var e=W()(["Start date"]);return je=function(){return e},e}function xe(){var e=W()(["Recipient"]);return xe=function(){return e},e}function ye(){var e=W()(["Sender"]);return ye=function(){return e},e}function we(){var e=W()(["Location"]);return we=function(){return e},e}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(){var e=W()(["Trash"]);return Ae=function(){return e},e}function Ce(){var e=W()(["Spam"]);return Ce=function(){return e},e}function De(){var e=W()(["Archive"]);return De=function(){return e},e}function Se(){var e=W()(["Inbox"]);return Se=function(){return e},e}function Le(){var e=W()(["All"]);return Le=function(){return e},e}var Ie="all",Te=be.B.INBOX,Pe=be.B.TRASH,Re=be.B.SPAM,Me=be.B.ARCHIVE,Be=function(e){var t=e.location,n=e.history,r=Object(o.useRef)(),a=Object(o.useState)({}),c=_()(a,2),u=c[0],s=c[1],l=Object(le.a)(),f=_()(l,1)[0],m=void 0===f?[]:f,d=[{value:Ie,text:Object(Y.c)("Option").t(Le())},{value:Te,text:Object(Y.c)("Mailbox").t(Se())},{value:Me,text:Object(Y.c)("Mailbox").t(De())},{value:Re,text:Object(Y.c)("Mailbox").t(Ce())},{value:Pe,text:Object(Y.c)("Mailbox").t(Ae())}].concat(m.filter((function(e){return e.Exclusive===be.z.FOLDER})).map((function(e){return{value:e.ID,text:e.Name}}))).concat(m.filter((function(e){return e.Exclusive===be.z.LABEL})).map((function(e){return{value:e.ID,text:e.Name}})));return i.a.createElement(fe.a,{originalPlacement:"bottom-right",hasCaret:!1,content:i.a.createElement(me.a,{name:"caret",className:"fill-white searchbox-advanced-search-icon"}),className:"searchbox-advanced-search-button"},i.a.createElement("form",{ref:r,name:"advanced-search",className:"p1",onSubmit:function(){n.push(ke({},t),{}),r.current.reset()}},i.a.createElement("div",{className:"mb1"},i.a.createElement(de.a,{htmlFor:"location"},Object(Y.c)("Label").t(we())),i.a.createElement(pe.a,{id:"location",options:d,onChange:function(e){var t=e.target;return s(ke({},u,{location:t.value}))}})),i.a.createElement("div",{className:"mb1 flex flex-nowrap"},i.a.createElement("div",{className:"mr1"},i.a.createElement(de.a,null,Object(Y.c)("Label").t(ye()))),i.a.createElement("div",null,i.a.createElement(de.a,null,Object(Y.c)("Label").t(xe())))),i.a.createElement("div",{className:"mb1 flex flex-nowrap"},i.a.createElement("div",{className:"mr1"},i.a.createElement(de.a,null,Object(Y.c)("Label").t(je()))),i.a.createElement("div",null,i.a.createElement(de.a,null,Object(Y.c)("Label").t(Oe())))),i.a.createElement("div",{className:"mb1 flex flex-nowrap"},i.a.createElement("div",{className:"mr1"},i.a.createElement(de.a,null,Object(Y.c)("Label").t(Ee()))),i.a.createElement("div",null,i.a.createElement(de.a,null,Object(Y.c)("Label").t(he())))),i.a.createElement("div",null,i.a.createElement(ve.a,{className:"w100",type:"submit"},Object(Y.c)("Action").t(ge())))))};function Fe(){var e=W()(["Settings"]);return Fe=function(){return e},e}function ze(){var e=W()(["Mailbox"]);return ze=function(){return e},e}function Ue(){var e=W()(["Search messages"]);return Ue=function(){return e},e}var _e,Ke,He=function(e){var t=e.location,n=e.history,r=e.expanded,a=e.onToggleExpand,c=e.onSearch,o=Object(ee.b)(),u=_()(o,1)[0].hasPaidMail;return i.a.createElement("header",{className:"header flex flex-nowrap reset4print"},i.a.createElement(te.a,{url:"/inbox",className:"nomobile"}),i.a.createElement(ne.a,{expanded:r,onToggle:a}),i.a.createElement(re.a,{placeholder:Object(Y.c)("Placeholder").t(Ue()),onSearch:c,advanced:i.a.createElement(Be,{location:t,history:n})}),i.a.createElement(ae.a,null,u?null:i.a.createElement(ce.a,{external:!0}),i.a.createElement(oe.a,{to:"/inbox",icon:"mailbox",text:Object(Y.c)("Title").t(ze()),"aria-current":!0}),i.a.createElement(oe.a,{external:!0,to:"/settings",icon:"settings-master",text:Object(Y.c)("Title").t(Fe())}),i.a.createElement(ie.a,null)))},Ve=n("RIqP"),Xe=n.n(Ve),Ge=n("3m2b"),We=n("u1Vw"),Ye=n("dN0G"),qe=n("6lBS"),Je=n("DIu/"),Qe=function(e){var t=e.action,n=e.unread,r=void 0===n?0:n;return i.a.createElement(i.a.Fragment,null,t,r?i.a.createElement("span",{className:"navigation__counterItem flex-item-noshrink rounded"},r):null)},Ze=n("o0o1"),$e=n.n(Ze),et=n("yXPU"),tt=n.n(et),nt=n("/hVJ"),rt=function(){var e=Object(H.a)().call,t=Object(nt.a)(),n=_()(t,2),r=n[0],a=n[1],c=function(){var t=tt()($e.a.mark((function t(n){return $e.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement("button",{className:"mr0-5",disabled:r,type:"button",onClick:function(e){return a(c(e))}},i.a.createElement(me.a,{fill:"light",name:"reload"}))};function at(){var e=W()(["Starred"]);return at=function(){return e},e}function ct(){var e=W()(["Drafts"]);return ct=function(){return e},e}function ot(){var e=W()(["Sent"]);return ot=function(){return e},e}function it(){var e=W()(["Archive"]);return it=function(){return e},e}function ut(){var e=W()(["All mail"]);return ut=function(){return e},e}function st(){var e=W()(["Spam"]);return st=function(){return e},e}function lt(){var e=W()(["Trash"]);return lt=function(){return e},e}function ft(){var e=W()(["Sent"]);return ft=function(){return e},e}function mt(){var e=W()(["Drafts"]);return mt=function(){return e},e}function dt(){var e=W()(["Inbox"]);return dt=function(){return e},e}var pt,vt="message",bt="conversation",gt=(_e={},se()(_e,be.B.INBOX,"inbox"),se()(_e,be.B.ALL_DRAFTS,"all-drafts"),se()(_e,be.B.ALL_SENT,"all-sent"),se()(_e,be.B.TRASH,"trash"),se()(_e,be.B.SPAM,"spam"),se()(_e,be.B.ALL_MAIL,"all-mail"),se()(_e,be.B.ARCHIVE,"archive"),se()(_e,be.B.SENT,"sent"),se()(_e,be.B.DRAFTS,"drafts"),se()(_e,be.B.STARRED,"starred"),_e),ht=Object.entries(gt).reduce((function(e,t){var n=_()(t,2),r=n[0];return e[n[1]]=r,e}),Object.create(null)),Et=(Ke={},se()(Ke,be.B.INBOX,Object(Y.c)("Link").t(dt())),se()(Ke,be.B.ALL_DRAFTS,Object(Y.c)("Link").t(mt())),se()(Ke,be.B.ALL_SENT,Object(Y.c)("Link").t(ft())),se()(Ke,be.B.TRASH,Object(Y.c)("Link").t(lt())),se()(Ke,be.B.SPAM,Object(Y.c)("Link").t(st())),se()(Ke,be.B.ALL_MAIL,Object(Y.c)("Link").t(ut())),se()(Ke,be.B.ARCHIVE,Object(Y.c)("Link").t(it())),se()(Ke,be.B.SENT,Object(Y.c)("Link").t(ot())),se()(Ke,be.B.DRAFTS,Object(Y.c)("Link").t(ct())),se()(Ke,be.B.STARRED,Object(Y.c)("Link").t(at())),Ke),Ot=0,jt=1,xt=2,yt=3,wt=1,Nt=2,kt=4,At=8,Ct=16,Dt=32,St=64,Lt=128,It=512,Tt=65536,Pt=131072,Rt=262144,Mt=8;!function(e){e[e.NEW=-1]="NEW",e[e.REPLY=0]="REPLY",e[e.REPLY_ALL=1]="REPLY_ALL",e[e.FORWARD=2]="FORWARD"}(pt||(pt={}));n("Q2p9");var Bt=n("sWYD"),Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ViewLayout,n=void 0===t?be.fb.COLUMN:t;return n===be.fb.COLUMN},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ViewMode,r=void 0===n?be.gb.GROUP:n,a=[be.B.DRAFTS,be.B.ALL_DRAFTS,be.B.SENT,be.B.ALL_SENT];return!a.includes(e)&&r===be.gb.GROUP},Ut=function(e){var t=e.labelID,n=e.mailSettings;return zt(t,n)?bt:vt},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Time,n=void 0===t?0:t,r=e.ContextTime,a=void 0===r?0:r;return new Date(1e3*(a||n))},Kt=function(e){var t=e.Labels,n=e.LabelIDs;return t?t.map((function(e){return e.ID||""})):n||[]},Ht=function(e,t){return Kt(e).some((function(e){return t===e}))},Vt=function(e,t){return e.ContextTime||e.Time||(function(e,t){var n=e.Labels;return(void 0===n?[]:n).find((function(e){var n=e.ID;return(void 0===n?"":n)===t}))}(e,t)||{}).ContextTime||0},Xt=function(e){var t=e.Size;return void 0===t?0:t},Gt=function(e,t,n){var r={Time:Vt,Size:Xt}[t.sort];return Xe()(e).sort((function(e,a){return o=a,i=r(c=e,n),u=r(o,n),i===u?(c.Order||0)-(o.Order||0):t.desc?u-i:i-u;var c,o,i,u}))};function Wt(){var e=W()(["Compose"]);return Wt=function(){return e},e}function Yt(){var e=W()(["Folders/labels"]);return Yt=function(){return e},e}function qt(){var e=W()(["All mail"]);return qt=function(){return e},e}function Jt(){var e=W()(["Trash"]);return Jt=function(){return e},e}function Qt(){var e=W()(["Spam"]);return Qt=function(){return e},e}function Zt(){var e=W()(["Archive"]);return Zt=function(){return e},e}function $t(){var e=W()(["Starred"]);return $t=function(){return e},e}function en(){var e=W()(["Sent"]);return en=function(){return e},e}function tn(){var e=W()(["Drafts"]);return tn=function(){return e},e}function nn(){var e=W()(["Inbox"]);return nn=function(){return e},e}var rn=function(e){var t=e.expanded,n=void 0!==t&&t,r=e.labelID,a=e.onCompose,c=Object(Ge.a)(),u=_()(c,2),s=u[0],l=u[1],f=Object(We.a)(),m=_()(f,2),d=m[0],p=m[1],v=Object(K.a)(),b=_()(v,2),g=b[0],h=b[1],E=Object(le.a)(),O=_()(E,2),j=O[0],x=O[1],y=(g||{}).ShowMoved,w=Ut({mailSettings:g,labelID:r}),N=Object(o.useMemo)((function(){var e=w===bt?s:d;return Array.isArray(e)?Object(Je.a)(e,"LabelID"):{}}),[s,d]);if(h||x||l||p)return i.a.createElement(X.a,null);var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.a.createElement(Qe,{unread:N[e].Unread,action:e===r?i.a.createElement(rt,null):null})},A=[{icon:"inbox",text:Object(Y.c)("Link").t(nn()),aside:k(be.B.INBOX),link:"/".concat(gt[be.B.INBOX])},{icon:"drafts",text:Object(Y.c)("Link").t(tn()),aside:k(y&be.bb.DRAFTS?be.B.ALL_DRAFTS:be.B.DRAFTS),link:y&be.bb.DRAFTS?"/".concat(gt[be.B.ALL_DRAFTS]):"/".concat(gt[be.B.DRAFTS])},{icon:"sent",text:Object(Y.c)("Link").t(en()),aside:k(y&be.bb.SENT?be.B.ALL_SENT:be.B.SENT),link:y&be.bb.SENT?"/".concat(gt[be.B.ALL_SENT]):"/".concat(gt[be.B.SENT])},{icon:"star",text:Object(Y.c)("Link").t($t()),aside:k(be.B.STARRED),link:"/".concat(gt[be.B.STARRED])},{icon:"archive",text:Object(Y.c)("Link").t(Zt()),aside:k(be.B.ARCHIVE),link:"/".concat(gt[be.B.ARCHIVE])},{icon:"spam",text:Object(Y.c)("Link").t(Qt()),aside:k(be.B.SPAM),link:"/".concat(gt[be.B.SPAM])},{icon:"trash",text:Object(Y.c)("Link").t(Jt()),aside:k(be.B.TRASH),link:"/".concat(gt[be.B.TRASH])},{icon:"all-emails",text:Object(Y.c)("Link").t(qt()),aside:k(be.B.ALL_MAIL),link:"/".concat(gt[be.B.ALL_MAIL])},{icon:"folder-label",text:Object(Y.c)("Link").t(Yt()),className:"alignleft",type:"button",onClick:function(){Object(qe.h)("/settings/labels")}}].concat(Xe()(j.map((function(e){var t=e.ID,n=e.Name,r=e.Exclusive,a=e.Color;return{icon:r===be.z.LABEL?"label":"folder",text:n,aside:k(t),link:"/".concat(t),color:a}}))));return i.a.createElement("div",{className:"sidebar flex flex-column noprint","data-expanded":n},i.a.createElement("div",{className:"nodesktop notablet"},i.a.createElement(te.a,{url:"/inbox"})),i.a.createElement("div",{className:"pl1 pr1 mb1"},i.a.createElement(ve.a,{className:"w100 bold",onClick:function(){a({action:pt.NEW})}},Object(Y.c)("Action").t(Wt()))),i.a.createElement("nav",{className:"navigation mw100 flex-item-fluid scroll-if-needed"},i.a.createElement(Ye.a,{list:A,className:"mt0"})))};function an(){var e=W()(["Upgrade"]);return an=function(){return e},e}var cn=function(e){var t=e.children,n=e.location,r=e.history,a=e.labelID,c=e.onCompose,u=Object(o.useRef)(null),s=Object(o.useState)(!1),l=_()(s,2),f=l[0],m=l[1];return Object(o.useEffect)((function(){m(!1)}),[n.pathname]),i.a.createElement("div",{className:"flex flex-nowrap no-scroll"},i.a.createElement(q.a,{items:[i.a.createElement(J.a,{key:"storage",upgradeButton:i.a.createElement(Q.a,{url:"/settings/subscription",target:"_self",className:"pm-button pm-button--primary pm-button--small"},Object(Y.c)("Action").t(an()))})]}),i.a.createElement("div",{className:"content flex-item-fluid reset4print"},i.a.createElement(He,{location:n,history:r,expanded:f,onToggleExpand:function(){return m(!f)},onSearch:function(e){console.log(Object($.f)(e))}}),i.a.createElement("div",{className:"flex flex-nowrap"},i.a.createElement(rn,{labelID:a,expanded:f,onCompose:c}),i.a.createElement("div",{className:"main flex-item-fluid scroll-smooth-touch",ref:u},i.a.createElement("div",{className:"flex-item-fluid"},i.a.createElement(Z.a.Provider,{value:u},t))))))},on=n("i9+t"),un=function(e){return gt[e]||e},sn=function(e,t){if(e in gt)return function(e){return Et[e]||e}(e);var n=Object(Je.a)(t);return e in n&&n[e].Name||e},ln=function(e){return!Object.values(be.B).includes(e)},fn=n("k7CA"),mn=n("brXu"),dn=n("Ayt/"),pn=function(e){return Math.ceil(e.total/e.size)};function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gn=function(e,t){return{params:t,page:e,elements:{},pages:[]}},hn=function(e){var t=e.conversationMode,n=e.labelID,r=e.page,a=e.sort,c=e.filter,i=Object(fn.a)(),u=Object(H.a)().subscribe,s=Object(o.useState)(!1),l=_()(s,2),f=l[0],m=l[1],d=Object(o.useState)(gn(r,{labelID:n,sort:a,filter:c})),p=_()(d,2),v=p[0],b=p[1],g=Object(o.useMemo)((function(){var e=v.params,t=e.labelID,n=e.sort,r=v.page,a=v.pages.reduce((function(e,t){return t<e?t:e}),v.pages[0]),c=(r.page-a)*r.size,o=c+r.size,i=Object.values(v.elements).filter((function(e){return Ht(e,t)}));return Gt(i,n,t).slice(c,o)}),[v]),h=Object(o.useMemo)((function(){return v.page.total}),[v.page.total]),E=function(){return g.length===function(e){return 0===e.total?0:e.total%e.size==0?e.size:pn(e)-1===e.page?e.total%e.size:e.size}(bn({},r,{total:h}))},O=function(){return!(f||n===v.params.labelID&&a===v.params.sort&&c===v.params.filter&&v.pages.some((function(e){return e===r.page||e===r.page-1||e===r.page+1})))},j=function(){return!f&&(O()||!v.pages.includes(r.page)||!E())},x=function(){var e=tt()($e.a.mark((function e(n){var r,a;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?mn.b:dn.d,e.next=3,i(r(n));case 3:return a=e.sent,e.abrupt("return",t?a.Conversation:a.Message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=tt()($e.a.mark((function e(){var o,u;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t?mn.g:dn.i,e.next=3,i(o({Page:r.page,PageSize:r.size,Limit:r.limit,LabelID:n,Sort:a.sort,Desc:a.desc?1:0,Unread:c.Unread}));case 3:return u=e.sent,e.abrupt("return",{Total:u.Total,Elements:t?u.Conversations:u.Messages});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=tt()($e.a.mark((function e(){var t,n,a;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,y();case 4:t=e.sent,n=t.Total,a=t.Elements,b((function(e){return bn({},e,{page:bn({},e.page,{page:r.page,total:n}),pages:[].concat(Xe()(e.pages),[r.page]),elements:bn({},e.elements,{},Object(Je.a)(a,"ID"))})}));case 8:return e.prev=8,m(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,,8,11]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){O()&&b(gn(r,{labelID:n,sort:a,filter:c})),j()&&w()}),[n,r,a,c]),Object(o.useEffect)((function(){return u(function(){var e=tt()($e.a.mark((function e(r){var a,c,o,i,u,s,l,f,m,d,p,g,h,E,O;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.Conversations,c=void 0===a?[]:a,o=r.Messages,i=void 0===o?[]:o,u=r.ConversationCounts,s=void 0===u?[]:u,l=r.MessageCounts,f=void 0===l?[]:l,m=t?c:i,d=(t?s:f).find((function(e){return e.LabelID===n})),console.log("event",m,d),p=m.reduce((function(e,n){var r=n.ID,a=n.Action,c=t?n.Conversation:n.Message;switch(a){case be.s.DELETE:e.toDelete.push(r);break;case be.s.UPDATE_DRAFT:case be.s.UPDATE_FLAGS:e.toUpdate.push(bn({ID:r},c));break;case be.s.CREATE:e.toCreate.push(c)}return e}),{toDelete:[],toUpdate:[],toCreate:[]}),g=p.toDelete,h=p.toUpdate,E=p.toCreate,e.next=8,Promise.all(h.map(function(){var e=tt()($e.a.mark((function e(t){var n,r;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID||"",r=v.elements[n],e.abrupt("return",r?bn({},r,{},t):x(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:O=e.sent,b((function(e){var t={};[].concat(Xe()(E),Xe()(O)).forEach((function(e){t[e.ID||""]=e}));var n=bn({},e.elements,{},t);return g.forEach((function(e){delete n[e]})),bn({},e,{elements:n,page:bn({},e.page,{total:d?d.Total:e.page.total})})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[v]),[v.params.labelID,g,f,v.page.total]},En=function(e){var t=new URLSearchParams(e.search),n={};return t.forEach((function(e,t){n[t]=e})),n},On=function(e,t){var n=new URLSearchParams(e.search);for(var r in t)void 0===t[r]?n.delete(r):n.set(r,t[r]);var a=n.toString(),c=(""===a?"":"?")+a;return e.pathname+c};function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xn=function(e,t,n){var r=void 0===n?"":"/".concat(n);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{pathname:"/".concat(un(t)).concat(r)})},yn=function(e){return"Time"===e.sort?e.desc?void 0:"date":e.desc?"-size":"size"},wn=function(e){return void 0===e.Unread?void 0:0===e.Unread?"read":"unread"},Nn=function(e){return function(e){if(void 0===e)return 0;var t=parseInt(e,10);return isNaN(t)?0:t-1}(En(e).page)},kn=function(){return i.a.createElement("span",{className:"toolbar-separator"})},An=n("QILm"),Cn=n.n(An),Dn=function(e){var t=e.children,n=e.loading,r=void 0!==n&&n,a=e.disabled,c=void 0!==a&&a,o=e.className,u=void 0===o?"":o,s=Cn()(e,["children","loading","disabled","className"]);return i.a.createElement("button",k()({type:"button",disabled:c||r,className:Object(on.a)(["toolbar-button",u])},s),t)};function Sn(){var e=W()(["Mark as unread"]);return Sn=function(){return e},e}function Ln(){var e=W()(["Mark as read"]);return Ln=function(){return e},e}var In=function(e){var t=e.mailSettings,n=e.labelID,r=e.selectedIDs,a=void 0===r?[]:r,c=Object(fn.a)(),o=Object(H.a)().call,u=t.MessageButtons,s=void 0===u?be.F.READ_UNREAD:u,l=Ut({mailSettings:t,labelID:n}),f=Object(nt.a)(),m=_()(f,2),d=m[0],p=m[1],v=function(){var e=tt()($e.a.mark((function e(){var t,n,r,i=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,n=0===t,r=l===bt?n?mn.e:mn.d:n?dn.g:dn.f,e.next=5,c(r(a));case 5:return e.next=7,o();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=[i.a.createElement(Dn,{key:"read",title:Object(Y.c)("Action").t(Ln()),loading:d,disabled:!a.length,onClick:function(){return p(v(1))}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"read"})),i.a.createElement(Dn,{key:"unread",title:Object(Y.c)("Action").t(Sn()),loading:d,disabled:!a.length,onClick:function(){return p(v(0))}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"unread"}))];return s===be.F.UNREAD_READ&&b.reverse(),i.a.createElement(i.a.Fragment,null,b)},Tn=n("Xksw"),Pn=n("slmy"),Rn=n("wJ4K"),Mn=function(e){var t=e.title,n=e.content,r=e.className,a=e.children,c=e.autoClose,u=void 0===c||c,s=e.disabled,l=void 0!==s&&s,f=e.size,m=void 0===f?"normal":f,d=Cn()(e,["title","content","className","children","autoClose","disabled","size"]),p=Object(o.useState)(Object(on.b)("dropdown")),v=_()(p,1)[0],b=Object(Tn.a)(),g=b.anchorRef,h=b.isOpen,E=b.toggle,O=b.close;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Pn.a,k()({title:t,buttonRef:g,isOpen:h,onClick:E,hasCaret:!0,disabled:l,caretClassName:"toolbar-icon",className:Object(on.a)(["flex-item-noshrink toolbar-button toolbar-button--dropdown",r])},d),n),i.a.createElement(Rn.a,{id:v,size:m,autoClose:u,isOpen:h,anchorRef:g,onClose:O,className:"toolbar-dropdown"},a({onClose:O})))},Bn=n("umjs"),Fn=n("I9Ef"),zn=n("V6h6");function Un(){var e=W()(["Row layout"]);return Un=function(){return e},e}function _n(){var e=W()(["Column layout"]);return _n=function(){return e},e}function Kn(){var e=W()(["Change layout"]);return Kn=function(){return e},e}var Hn=function(e){var t=e.mailSettings,n=(void 0===t?{}:t).ViewLayout,r=void 0===n?be.fb.COLUMN:n,a=Object(fn.a)(),c=Object(H.a)().call,o=Object(nt.a)(),u=_()(o,2),s=u[0],l=u[1],f=r===be.fb.COLUMN?"layout-columns":"layout-rows",m=function(){var e=tt()($e.a.mark((function e(t){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(zn.b)(t));case 2:return e.next=4,c();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Mn,{title:Object(Y.c)("Action").t(Kn()),content:i.a.createElement(me.a,{className:"toolbar-icon",name:f})},(function(){return i.a.createElement(Bn.a,null,i.a.createElement(Fn.a,{disabled:r===be.fb.COLUMN,loading:s,className:"alignleft",onClick:function(){return l(m(be.fb.COLUMN))}},i.a.createElement(me.a,{name:"layout-columns",className:"mr0-5"}),Object(Y.c)("Action").t(_n())),i.a.createElement(Fn.a,{disabled:r===be.fb.ROW,loading:s,className:"alignleft",onClick:function(){return l(m(be.fb.ROW))}},i.a.createElement(me.a,{name:"layout-rows",className:"mr0-5"}),Object(Y.c)("Action").t(Un())))}))},Vn=n("pIIs");function Xn(){var e=W()(["Move to spam"]);return Xn=function(){return e},e}function Gn(){var e=W()(["Move to archive"]);return Gn=function(){return e},e}function Wn(){var e=W()(["Move to inbox"]);return Wn=function(){return e},e}function Yn(){var e=W()(["Move to trash"]);return Yn=function(){return e},e}function qn(){var e=W()(["Elements moved"]);return qn=function(){return e},e}var Jn=be.B.TRASH,Qn=be.B.SPAM,Zn=be.B.DRAFTS,$n=be.B.ARCHIVE,er=be.B.SENT,tr=be.B.INBOX,nr=be.B.ALL_DRAFTS,rr=be.B.ALL_SENT,ar=function(e){var t=e.labelID,n=void 0===t?"":t,r=e.mailSettings,a=void 0===r?{}:r,c=e.selectedIDs,o=void 0===c?[]:c,u=Object(Vn.a)().createNotification,s=Object(H.a)().call,l=Object(fn.a)(),f=Object(nt.a)(),m=_()(f,2),d=m[0],p=m[1],v=Ut({mailSettings:a,labelID:n}),b=function(){var e=tt()($e.a.mark((function e(t){var n;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v===bt?mn.c:dn.e,e.next=3,l(n({LabelID:t,IDs:o}));case 3:return e.next=5,s();case 5:u({text:Object(Y.c)("Success").t(qn())});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=![Zn,nr,Jn].includes(n),h=![er,rr,Zn,nr].includes(n),E=![Zn,nr,$n].includes(n),O=![er,rr,Qn].includes(n);return i.a.createElement(i.a.Fragment,null,g?i.a.createElement(Dn,{loading:d,title:Object(Y.c)("Action").t(Yn()),onClick:function(){return p(b(Jn))}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"trash"})):null,h?i.a.createElement(Dn,{loading:d,title:Object(Y.c)("Action").t(Wn()),onClick:function(){return p(b(tr))}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"inbox"})):null,E?i.a.createElement(Dn,{loading:d,title:Object(Y.c)("Action").t(Gn()),onClick:function(){return p(b($n))}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"archive"})):null,O?i.a.createElement(Dn,{loading:d,title:Object(Y.c)("Action").t(Xn()),onClick:function(){return p(b(Qn))}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"spam"})):null)},cr=n("F9b+"),or=n("ncqd"),ir=n("5Bhs"),ur=n("+Vas");function sr(){var e=W()(["Empty folder"]);return sr=function(){return e},e}function lr(){var e=W()(["Delete"]);return lr=function(){return e},e}function fr(){var e=W()(["Folder cleared"]);return fr=function(){return e},e}function mr(){var e=W()(["This action will permanently delete your emails. Are you sure you want to empty this folder?"]);return mr=function(){return e},e}function dr(){var e=W()(["Empty"]);return dr=function(){return e},e}function pr(){var e=W()(["Empty folder"]);return pr=function(){return e},e}function vr(){var e=W()(["Elements deleted"]);return vr=function(){return e},e}function br(){var e=W()(["This action will permanently delete the selected email. Are you sure you want to delete this email?"]);return br=function(){return e},e}function gr(){var e=W()(["Delete"]);return gr=function(){return e},e}function hr(){var e=W()(["Delete email"]);return hr=function(){return e},e}var Er,Or,jr,xr=be.B.TRASH,yr=be.B.SPAM,wr=be.B.DRAFTS,Nr=be.B.ALL_DRAFTS,kr=be.B.ALL_MAIL,Ar=be.B.INBOX,Cr=be.B.SENT,Dr=be.B.ALL_SENT,Sr=be.B.ARCHIVE,Lr=function(e){var t=e.labelID,n=void 0===t?"":t,r=e.mailSettings,a=void 0===r?{}:r,c=e.selectedIDs,o=void 0===c?[]:c,u=Object(Vn.a)().createNotification,s=Object(cr.a)().createModal,l=Object(H.a)().call,f=Object(fn.a)(),m=Object(nt.a)(),d=_()(m,2),p=d[0],v=d[1],b=[xr,yr,wr,Nr,Cr,Dr].includes(n),g=![Ar,Cr,Dr,Sr,kr].includes(n),h=Ut({mailSettings:a,labelID:n}),E=function(){var e=tt()($e.a.mark((function e(){var t;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){s(i.a.createElement(or.a,{title:Object(Y.c)("Title").ngettext(Object(Y.msgid)(hr()),"Delete emails",o.length),confirm:i.a.createElement(ir.a,{type:"submit",icon:null},Object(Y.c)("Action").t(gr())),onConfirm:e,onClose:t},i.a.createElement(ur.a,{type:"warning"},Object(Y.c)("Info").ngettext(Object(Y.msgid)(br()),"This action will permanently delete the selected emails. Are you sure you want to delete these emails?",o.length))))}));case 2:return t=h===bt?mn.a:dn.b,e.next=5,f(t(o));case 5:return e.next=7,l();case 7:u({text:Object(Y.c)("Success").t(vr())});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){s(i.a.createElement(or.a,{title:Object(Y.c)("Title").t(pr()),confirm:i.a.createElement(ir.a,{type:"submit",icon:null},Object(Y.c)("Action").t(dr())),onConfirm:e,onClose:t},i.a.createElement(ur.a,{type:"warning"},Object(Y.c)("Info").t(mr()))))}));case 2:return Y.c,e.next=5,f(Object(dn.c)({LabelID:n,AddressID:void 0}));case 5:return e.next=7,l();case 7:u({text:Object(Y.c)("Success").t(fr())});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,b?i.a.createElement(Dn,{loading:p,title:Object(Y.c)("Action").t(lr()),onClick:function(){return v(E())}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"delete"})):null,g?i.a.createElement(Dn,{loading:p,title:Object(Y.c)("Action").t(sr()),onClick:function(){return v(O())}},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"empty-folder"})):null)};function Ir(){var e=W()(["Date: old to new"]);return Ir=function(){return e},e}function Tr(){var e=W()(["Date: new to old"]);return Tr=function(){return e},e}function Pr(){var e=W()(["Size: large to small"]);return Pr=function(){return e},e}function Rr(){var e=W()(["Size: small to large"]);return Rr=function(){return e},e}var Mr="Time",Br="Size",Fr=(jr={},se()(jr,Br,(Er={},se()(Er,0,"sort-small-large"),se()(Er,1,"sort-large-small"),Er)),se()(jr,Mr,(Or={},se()(Or,0,"sort-old-new"),se()(Or,1,"sort-new-old"),Or)),jr),zr=function(e){var t=e.loading,n=e.sort,r=n.sort,a=n.desc,c=e.onSort;return i.a.createElement(Mn,{content:i.a.createElement(me.a,{className:"toolbar-icon",name:Fr[r][a?1:0]})},(function(){return i.a.createElement(Bn.a,null,i.a.createElement(Fn.a,{disabled:r===Br&&!a,className:"alignleft",loading:t,onClick:function(){return c({sort:Br,desc:!1})}},i.a.createElement(me.a,{name:Fr.Size[0],className:"mr0-5"}),Object(Y.c)("Action").t(Rr())),i.a.createElement(Fn.a,{disabled:r===Br&&a,className:"alignleft",loading:t,onClick:function(){return c({sort:Br,desc:!0})}},i.a.createElement(me.a,{name:Fr.Size[1],className:"mr0-5"}),Object(Y.c)("Action").t(Pr())),i.a.createElement(Fn.a,{disabled:r===Mr&&a,className:"alignleft",loading:t,onClick:function(){return c({sort:Mr,desc:!0})}},i.a.createElement(me.a,{name:Fr.Time[1],className:"mr0-5"}),Object(Y.c)("Action").t(Tr())),i.a.createElement(Fn.a,{disabled:r===Mr&&!a,className:"alignleft",loading:t,onClick:function(){return c({sort:Mr,desc:!1})}},i.a.createElement(me.a,{name:Fr.Time[0],className:"mr0-5"}),Object(Y.c)("Action").t(Ir())))}))};function Ur(){var e=W()(["Show read"]);return Ur=function(){return e},e}function _r(){var e=W()(["Show unread"]);return _r=function(){return e},e}function Kr(){var e=W()(["Show all"]);return Kr=function(){return e},e}var Hr=function(e){var t=e.loading,n=e.filter,r=void 0===n?{}:n,a=e.onFilter;return i.a.createElement(Mn,{content:i.a.createElement(me.a,{className:"toolbar-icon",name:"bullet-points"})},(function(){return i.a.createElement(Bn.a,null,i.a.createElement(Fn.a,{disabled:0===Object.values(r).length,className:"alignleft",loading:t,onClick:function(){return a({})}},i.a.createElement(me.a,{name:"bullet-points",className:"mr0-5"}),Object(Y.c)("Action").t(Kr())),i.a.createElement(Fn.a,{disabled:1===r.Unread,className:"alignleft",loading:t,onClick:function(){return a({Unread:1})}},i.a.createElement(me.a,{name:"unread",className:"mr0-5"}),Object(Y.c)("Action").t(_r())),i.a.createElement(Fn.a,{disabled:0===r.Unread,className:"alignleft",loading:t,onClick:function(){return a({Unread:0})}},i.a.createElement(me.a,{name:"read",className:"mr0-5"}),Object(Y.c)("Action").t(Ur())))}))},Vr=n("tWpJ");function Xr(){var e=W()(["All starred"]);return Xr=function(){return e},e}function Gr(){var e=W()(["All unstarred"]);return Gr=function(){return e},e}function Wr(){var e=W()(["All read"]);return Wr=function(){return e},e}function Yr(){var e=W()(["All unread"]);return Yr=function(){return e},e}function qr(){var e=W()(["Select all"]);return qr=function(){return e},e}function Jr(){var e=W()(["Open actions dropdown"]);return Jr=function(){return e},e}var Qr=function(e){var t=e.loading,n=e.disabled,r=e.checked,a=e.onCheck;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Vr.a,{className:"flex pl1",checked:r,disabled:n,loading:t,onChange:function(e){var t=e.target;return a(t.checked)}}),i.a.createElement(Mn,{disabled:n,loading:t,title:Object(Y.c)("Title").t(Jr()),content:""},(function(){return i.a.createElement(Bn.a,null,i.a.createElement(Fn.a,{className:"alignleft",onClick:function(){return a()}},i.a.createElement(me.a,{name:"show-all-emails",className:"mr0-5"}),Object(Y.c)("Action").t(qr())),i.a.createElement(Fn.a,{className:"alignleft",onClick:function(){return a()}},i.a.createElement(me.a,{name:"unread",className:"mr0-5"}),Object(Y.c)("Action").t(Yr())),i.a.createElement(Fn.a,{className:"alignleft",onClick:function(){return a()}},i.a.createElement(me.a,{name:"read",className:"mr0-5"}),Object(Y.c)("Action").t(Wr())),i.a.createElement(Fn.a,{className:"alignleft",onClick:function(){return a()}},i.a.createElement(me.a,{name:"star",className:"mr0-5"}),Object(Y.c)("Action").t(Gr())),i.a.createElement(Fn.a,{className:"alignleft",onClick:function(){return a()}},i.a.createElement(me.a,{name:"starfull",className:"mr0-5"}),Object(Y.c)("Action").t(Xr())))})))},Zr=n("TQRW"),$r=n("iCC2"),ea=n("8zwm");n("aM+n");function ta(){var e=W()(["Filter folders"]);return ta=function(){return e},e}function na(){var e=W()(["Create folder"]);return na=function(){return e},e}function ra(){var e=W()(["Move to"]);return ra=function(){return e},e}function aa(){var e=W()(["Elements moved to ",""]);return aa=function(){return e},e}function ca(){var e=W()(["Trash"]);return ca=function(){return e},e}function oa(){var e=W()(["Spam"]);return oa=function(){return e},e}function ia(){var e=W()(["Archive"]);return ia=function(){return e},e}function ua(){var e=W()(["Inbox"]);return ua=function(){return e},e}var sa=Zr.a,la=be.B.INBOX,fa=be.B.TRASH,ma=be.B.SPAM,da=be.B.ARCHIVE,pa=function(e){var t=e.selectedIDs,n=void 0===t?[]:t,r=e.type,a=e.onClose,c=Object(Vn.a)().createNotification,u=Object(nt.a)(),s=_()(u,2),l=s[0],f=s[1],m=Object(fn.a)(),d=Object(H.a)().call,p=Object(cr.a)().createModal,v=Object(le.a)(),b=_()(v,1)[0],g=void 0===b?[]:b,h=Object(o.useState)(""),E=_()(h,2),O=E[0],j=E[1],x=Object($.f)(O),y=g.filter((function(e){return e.Exclusive===be.z.FOLDER})).concat([{ID:la,Name:Object(Y.c)("Mailbox").t(ua()),icon:"inbox"},{ID:da,Name:Object(Y.c)("Mailbox").t(ia()),icon:"archive"},{ID:ma,Name:Object(Y.c)("Mailbox").t(oa()),icon:"spam"},{ID:fa,Name:Object(Y.c)("Mailbox").t(ca()),icon:"trash"}].filter(Boolean)).filter((function(e){var t=e.Name,n=void 0===t?"":t;return!O||Object($.f)(n).includes(x)})),w=function(){var e=tt()($e.a.mark((function e(t){var o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r===bt?mn.c:dn.e,e.next=3,m(o({LabelID:t.ID,IDs:n}));case 3:return e.next=5,d();case 5:a(),c({text:Object(Y.c)("Success").t(aa(),t.Name)});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"p1"},i.a.createElement("div",{className:"flex flex-spacebetween flex-items-center mb1"},i.a.createElement("label",{htmlFor:"filter-folders",className:"bold"},Object(Y.c)("Label").t(ra())),i.a.createElement($r.a,{title:Object(Y.c)("Title").t(na())},i.a.createElement(ve.a,{className:"pm-button--small pm-button--for-smallicon",onClick:function(){p(i.a.createElement(ea.a,{type:"folder",label:null}))}},i.a.createElement(me.a,{name:"folder",fill:"light",className:"flex-item-noshrink mr0-25"}),"+"))),i.a.createElement("div",{className:"mb1"},i.a.createElement(sa,{autoFocus:!0,value:O,onChange:j,id:"filter-folders",placeholder:Object(Y.c)("Placeholder").t(ta())})),i.a.createElement("div",{className:"scroll-if-needed scroll-smooth-touch moveDropdown-list-container"},i.a.createElement("ul",{className:"unstyled mt0 mb0"},y.map((function(e,t){return i.a.createElement("li",{key:e.ID,className:Object(on.a)([t<y.length-1&&"border-bottom"])},i.a.createElement("button",{type:"button",disabled:l,className:"w100 flex flex-nowrap flex-items-center pt0-5 pb0-5",onClick:function(){return f(w(e))}},i.a.createElement(me.a,{name:"folder",color:e.Color,className:"flex-item-noshrink mr0-5"}),i.a.createElement("span",{className:"ellipsis",title:e.Name},e.Name)))})))))};n("ncOH");function va(){var e=W()(["Apply"]);return va=function(){return e},e}function ba(){var e=W()(["Also archive"]);return ba=function(){return e},e}function ga(){var e=W()(["Filter labels"]);return ga=function(){return e},e}function ha(){var e=W()(["Create label"]);return ha=function(){return e},e}function Ea(){var e=W()(["Label as"]);return Ea=function(){return e},e}function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ja(){var e=W()(["Labels applied"]);return ja=function(){return e},e}var xa=Zr.a,ya=function(e){var t=e.selectedIDs,n=void 0===t?[]:t,r=e.type,a=e.onClose,c=Object(o.useState)(Object(on.b)("label-dropdown")),u=_()(c,1)[0],s=Object(Vn.a)().createNotification,l=Object(nt.a)(),f=_()(l,2),m=f[0],d=f[1],p=Object(fn.a)(),v=Object(H.a)().call,b=Object(cr.a)().createModal,g=Object(le.a)(),h=_()(g,1)[0],E=void 0===h?[]:h,O=Object(o.useState)(""),j=_()(O,2),x=j[0],y=j[1],w=Object(o.useState)(""),N=_()(w,2),k=N[0],A=N[1],C=Object(o.useState)(!1),D=_()(C,2),S=D[0],L=D[1],I=Object(o.useState)({}),T=_()(I,2),P=T[0],R=T[1],M=Object($.f)(x),B=E.filter((function(e){return e.Exclusive===be.z.LABEL})).filter((function(e){var t=e.Name,n=void 0===t?"":t;return!x||Object($.f)(n).includes(M)})),F=function(){var e=tt()($e.a.mark((function e(){var t,c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r===vt?dn.e:mn.c,c=r===vt?dn.k:mn.h,o=B.map((function(e){var r=e.ID,a=void 0===r?"":r;return P[a]?p(t({LabelID:a,IDs:n})):p(c({LabelID:a,IDs:n}))})),e.next=5,Promise.all(o);case 5:return e.next=7,v();case 7:a(),s({text:Object(Y.c)("Success").t(ja())});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){return function(t){var n=t.target,r=t.nativeEvent.shiftKey,a=[e];if(k&&r){var c=B.findIndex((function(t){return t.ID===e})),o=B.findIndex((function(e){return e.ID===k}));a.push.apply(a,Xe()(B.slice(Math.min(c,o),Math.max(c,o)+1).map((function(e){var t=e.ID;return void 0===t?"":t}))))}A(e);var i=a.reduce((function(e,t){return e[t]=n.checked,e}),Object.create(null));console.log("handleCheck",P,i),R(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},P,{},i))}};return i.a.createElement("div",{className:"p1"},i.a.createElement("div",{className:"flex flex-spacebetween flex-items-center mb1"},i.a.createElement("label",{htmlFor:"filter-labels",className:"bold"},Object(Y.c)("Label").t(Ea())),i.a.createElement($r.a,{title:Object(Y.c)("Title").t(ha())},i.a.createElement(ve.a,{className:"pm-button--small pm-button--for-smallicon",onClick:function(){b(i.a.createElement(ea.a,{type:"label",label:null}))}},i.a.createElement(me.a,{name:"label",fill:"light",className:"flex-item-noshrink mr0-25"}),"+"))),i.a.createElement("div",{className:"mb1"},i.a.createElement(xa,{autoFocus:!0,value:x,onChange:y,id:"filter-labels",placeholder:Object(Y.c)("Placeholder").t(ga())})),i.a.createElement("div",{className:"scroll-if-needed scroll-smooth-touch mb1 labelDropdown-list-container"},i.a.createElement("ul",{className:"unstyled mt0 mb0"},B.map((function(e,t){var n=e.ID,r=void 0===n?"":n,a=e.Name,c=void 0===a?"":a,o=e.Color,s=void 0===o?"":o,l="".concat(u,"-").concat(r);return i.a.createElement("li",{key:l,className:Object(on.a)(["w100 flex flex-nowrap flex-spacebetween flex-items-center pt0-5 pb0-5",t<B.length-1&&"border-bottom"])},i.a.createElement("div",{className:"flex flex-nowrap flex-spacebetween flex-items-center"},i.a.createElement(me.a,{name:"label",color:s,className:"flex-item-noshrink mr0-5"}),i.a.createElement("label",{htmlFor:l,title:c,className:"ellipsis"},c)),i.a.createElement(Vr.a,{className:"flex-item-noshrink",id:l,checked:P[r]||!1,onChange:z(r)}))})))),i.a.createElement("div",{className:"mb1 flex flex-spacebetween"},i.a.createElement("label",{htmlFor:"alsoArchive"},Object(Y.c)("Label").t(ba())),i.a.createElement(Vr.a,{id:"alsoArchive",checked:S,onChange:function(e){var t=e.target;return L(t.checked)}})),i.a.createElement("div",null,i.a.createElement(ve.a,{className:"w100",loading:m,onClick:function(){return d(F())}},Object(Y.c)("Action").t(va()))))},wa=function(e){var t=e.onClick;return i.a.createElement(Dn,{onClick:t},i.a.createElement(me.a,{className:"toolbar-icon mauto",name:"arrow-left"}))};function Na(){var e=W()(["Next"]);return Na=function(){return e},e}function ka(){var e=W()(["Change layout"]);return ka=function(){return e},e}function Aa(){var e=W()(["Previous"]);return Aa=function(){return e},e}var Ca=function(e){var t=e.loading,n=e.page,r=e.onPage,a=function(e){return r(e)},c=pn(n);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Dn,{loading:t,disabled:n.page<=0,title:Object(Y.c)("Action").t(Aa()),onClick:function(){return a(n.page-1)}},i.a.createElement(me.a,{className:"toolbar-icon rotateZ-90 mauto",name:"caret"})),i.a.createElement(Mn,{title:Object(Y.c)("Action").t(ka()),content:String(n.page+1),disabled:c<=1,size:"narrow"},(function(){return i.a.createElement(Bn.a,null,Xe()(Array(c)).map((function(e,r){return i.a.createElement(Fn.a,{key:r,loading:t,disabled:n.page===r,onClick:(c=r,function(){return a(c)})},r+1);var c})))})),i.a.createElement(Dn,{loading:t,disabled:n.page>=c-1,title:Object(Y.c)("Action").t(Na()),onClick:function(){return a(n.page+1)}},i.a.createElement(me.a,{className:"toolbar-icon rotateZ-270 mauto",name:"caret"})))},Da=(n("0u2a"),function(e){var t=e.labelID,n=void 0===t?"":t,r=e.elementID,a=e.checkAll,c=e.onCheckAll,o=e.mailSettings,u=void 0===o?{}:o,s=e.selectedIDs,l=void 0===s?[]:s,f=e.loading,m=void 0!==f&&f,d=e.onSort,p=e.sort,v=e.onFilter,b=e.filter,g=e.onBack,h=e.page,E=e.onPage,O=Ut({mailSettings:u,labelID:n}),j=Ft(u);return i.a.createElement("nav",{className:"toolbar flex noprint flex-spacebetween"},i.a.createElement("div",{className:"flex"},j||!r?i.a.createElement(Qr,{checked:a,onCheck:c,loading:m}):i.a.createElement(wa,{onClick:g}),i.a.createElement(kn,null),i.a.createElement(In,{labelID:n,mailSettings:u,selectedIDs:l}),i.a.createElement(kn,null),i.a.createElement(ar,{labelID:n,mailSettings:u,selectedIDs:l}),i.a.createElement(Lr,{labelID:n,mailSettings:u,selectedIDs:l}),i.a.createElement(kn,null),i.a.createElement(Mn,{autoClose:!1,content:i.a.createElement(me.a,{className:"toolbar-icon",name:"folder"})},(function(e){var t=e.onClose;return i.a.createElement(pa,{selectedIDs:l,type:O,onClose:t})})),i.a.createElement(Mn,{autoClose:!1,content:i.a.createElement(me.a,{className:"toolbar-icon",name:"label"})},(function(e){var t=e.onClose;return i.a.createElement(ya,{selectedIDs:l,type:O,onClose:t})}))),i.a.createElement("div",{className:"flex"},i.a.createElement(Hr,{loading:m,filter:b,onFilter:v}),i.a.createElement(zr,{loading:m,sort:p,onSort:d}),i.a.createElement(Hn,{mailSettings:u}),i.a.createElement(kn,null),i.a.createElement(Ca,{loading:m,page:h,onPage:E})))}),Sa=function(e){var t=e.children,n=e.className,r=Cn()(e,["children","className"]);return i.a.createElement("label",{className:Object(on.a)(["relative",n])},i.a.createElement("input",k()({type:"checkbox",className:"item-checkbox inner-ratio-container cursor-pointer m0"},r)),i.a.createElement("span",{className:"item-icon flex-item-noshrink rounded50 bg-white inline-flex"},i.a.createElement("span",{className:"mauto item-abbr"},t),i.a.createElement("span",{className:"item-icon-fakecheck mauto"},i.a.createElement(me.a,{name:"on",className:"fill-white"}))))},La=function(e){var t=e.Address;return e.Name||t||""},Ia=n("s1cp"),Ta=n("iylp"),Pa=n("i69e"),Ra=wt,Ma=Nt,Ba=Tt,Fa=It,za=Dt,Ua=St,_a=Lt,Ka=kt,Ha=Ct,Va=At,Xa=Rt,Ga=Pt,Wa=be.G.PLAINTEXT,Ya=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.MIMEType;return n===e}},qa=Ya(be.G.MIME),Ja=Ya(Wa),Qa=Ya(be.G.DEFAULT),Za=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.Flags,r=void 0===n?0:n;return Object(Ia.b)(r,e)}},$a=(Za(Ba),Za(Fa)),ec=Za(Ka),tc=function(e){return!ec(e)},nc=Za(Ha),rc=Za(Ra),ac=Za(Ma),cc=(Za(za),Za(Ua),Za(_a),Za(Ma|Ra)),oc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!ac(e)&&!rc(e)},ic=Za(Va),uc=Za(Va|Ma),sc=Za(Va|Ka),lc=Za(Xa),fc=(Za(Ga),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tc(e)&&rc(e)&&ic(e)}),mc=function(e){var t=e.Time;return(void 0===t?0:t)>=1546300800},dc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e.Password},pc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(Ia.c)(e,wt)},vc=function(e){var t=e.Address;return e.Name||t||""},bc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Sender,n=void 0===t?{}:t;return vc(n)},gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ToList,n=void 0===t?[]:t,r=e.CCList,a=void 0===r?[]:r,c=e.BCCList,o=void 0===c?[]:c;return[].concat(Xe()(n),Xe()(a),Xe()(o))},hc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gc(e).map((function(e){return e.Address||""})).filter(Ta.b)},Ec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Time,n=void 0===t?0:t;return new Date(1e3*n)},Oc=function(e,t){var n=e.ParsedHeaders,r=void 0===n?{}:n;return t?r[t]:r},jc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.Attachments||[]},xc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jc(e).length>0},yc=function(e){var t=e.Flags,n=e.ParsedHeaders,r=void 0===n?{}:n;if(!ac({Flags:t}))return!1;if(nc({Flags:t}))return!0;return["X-Autoreply","X-Autorespond","X-Autoreply-From","X-Mail-Autoreply"].some((function(e){return e in r}))||[["Auto-Submitted","auto-replied"],["Precedence","auto_reply"],["X-Precedence","auto_reply"],["Delivered-To","autoresponder"]].some((function(e){var t=_()(e,2),n=t[0],a=t[1];return n in r&&r[n].toLowerCase()===a}))},wc=function(e){return Qa(e.data)?e.content:void 0},Nc=function(e){var t,n;return(null===(t=e.data)||void 0===t?void 0:t.MIMEType)!==be.G.DEFAULT?null===(n=e.content)||void 0===n?void 0:n.replace(/\u200B/g,""):function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Pa.a({bulletListMarker:"-",hr:""}),a={filter:function(e){return e.classList.contains("protonmail_signature_block")},replacement:function(e){return"".concat(e.trim(),"")}},c={filter:"br",replacement:function(e,t){var n,r,a;return"DIV"===(null===(n=t.parentElement)||void 0===n?void 0:n.nodeName)&&1===t.parentElement.childElementCount?t.parentElement.textContent?"\n":"\n\n":"BR"===(null===(r=t.parentElement)||void 0===r?void 0:null===(a=r.lastElementChild)||void 0===a?void 0:a.nodeName)&&t.parentElement.textContent?"LI"!==t.parentElement.nodeName?"\n":"":"\n\n"}},o={filter:"img",replacement:function(e,t){if(!n)return"";var r=t,a=r.alt||r.src;return a?"[".concat(a,"]"):""}},i={filter:"a",replacement:function(e,t){return t.textContent}},u={filter:["div"],replacement:function(e){return e}};r.use([function(){return r.addRule("replaceAnchor",i)},function(){return r.addRule("replaceDiv",u)},function(){return r.addRule("replaceImg",o)},function(){return r.addRule("replaceBreakLine",c)},function(){return r.addRule("protonSignature",a)}]),r.escape=Ta.b;var s=r.turndown(e);return s.startsWith("")&&t?"\n\n\n".concat(s,"\n\n"):s}(e.content||"",!0,!0).replace(/\u200B/g,"")},kc=function(e,t){if(Ja(e.data)||t)return Nc(e)},Ac=function(e){var t=e.element,n=void 0===t?{}:t,r=e.type,a=Object(fn.a)(),c=r===bt,o=Object(H.a)().call,u=Object(nt.a)(),s=_()(u,2),l=s[0],f=s[1],m=Kt(n).includes(be.B.STARRED),d=m?"starfull":"star",p=function(){var e=tt()($e.a.mark((function e(){var t;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c?m?mn.h:mn.c:m?dn.k:dn.e,e.next=3,a(t({LabelID:be.B.STARRED,IDs:[n.ID]}));case 3:return e.next=5,o();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("button",{disabled:l,type:"button",className:Object(on.a)(["starbutton item-star inline-flex",m&&"starbutton--is-starred"]),onClick:function(){return f(p())}},i.a.createElement(me.a,{name:d,fill:""}))},Cc=n("+AqD"),Dc=n("2iEm"),Sc=function(e){var t=e.element,n=e.onUnlabel,r=e.max,a=void 0===r?99:r,c=e.labels,o=void 0===c?[]:c,u=e.className,s=void 0===u?"":u,l=Kt(t),f=Object(Je.a)(o);return i.a.createElement("div",{className:Object(on.a)(["inbl",s])},Object(Cc.b)(l.map((function(e){return f[e]})).filter(Boolean),"Order").slice(0,a).map((function(e){var t=e.ID,r=void 0===t?"":t,a=e.Name,c=void 0===a?"":a,o=e.Color,u=void 0===o?"":o,s={backgroundColor:u,borderColor:u},l="/".concat(r);return i.a.createElement("span",{className:"badgeLabel",style:s,key:r},i.a.createElement(Dc.a,{to:l},c),n?i.a.createElement("button",{type:"button",onClick:function(){return n(r)}},i.a.createElement(me.a,{name:"off"})):null)})))},Lc=function(e){var t=e.element,n=void 0===t?{}:t,r=e.type,a=void 0===r?bt:r,c=e.className;return(a===bt?n.ContextNumAttachments:xc(n))?i.a.createElement(me.a,{name:"attach",fill:"",className:Object(on.a)(["fill-global-success",c])}):null};function Ic(){var e=W()(["Drafts"]);return Ic=function(){return e},e}function Tc(){var e=W()(["Sent"]);return Tc=function(){return e},e}function Pc(){var e=W()(["Archive"]);return Pc=function(){return e},e}function Rc(){var e=W()(["Spam"]);return Rc=function(){return e},e}function Mc(){var e=W()(["Trash"]);return Mc=function(){return e},e}function Bc(){var e=W()(["Inbox"]);return Bc=function(){return e},e}var Fc=be.B.INBOX,zc=be.B.TRASH,Uc=be.B.SPAM,_c=be.B.ARCHIVE,Kc=be.B.SENT,Hc=be.B.DRAFTS,Vc=function(e){var t,n,r=e.message,a=e.mailSettings,c=r.LabelIDs,o=void 0===c?[]:c,u=(n=a.ShowMoved,t={},se()(t,Fc,{icon:"inbox",name:Object(Y.c)("Mailbox").t(Bc()),to:"/inbox"}),se()(t,zc,{icon:"trash",name:Object(Y.c)("Mailbox").t(Mc()),to:"/trash"}),se()(t,Uc,{icon:"spam",name:Object(Y.c)("Mailbox").t(Rc()),to:"/spam"}),se()(t,_c,{icon:"archive",name:Object(Y.c)("Mailbox").t(Pc()),to:"/archive"}),se()(t,Kc,{icon:"sent",name:Object(Y.c)("Mailbox").t(Tc()),to:n&be.bb.SENT?"/".concat(gt[be.B.ALL_SENT]):"/".concat(gt[be.B.SENT])}),se()(t,Hc,{icon:"drafts",name:Object(Y.c)("Mailbox").t(Ic()),to:n&be.bb.DRAFTS?"/".concat(gt[be.B.ALL_DRAFTS]):"/".concat(gt[be.B.DRAFTS])}),t);return i.a.createElement(i.a.Fragment,null,o.filter((function(e){return u[e]})).map((function(e){var t=u[e],n=t.icon,r=t.name,a=t.to;return i.a.createElement(Dc.a,{to:a,className:"mr0-25 flex-item-noshrink",key:e,title:r},i.a.createElement(me.a,{name:n}))})))},Xc=n("TjGc"),Gc=n("7xvl"),Wc=n("voWS"),Yc=function(e){return Object(Bt.a)(e,Object(Xc.a)(e)?"p":"PP",{locale:Wc.a})},qc=function(e){return Object(Bt.a)(e,"PPPPp",{locale:Wc.a})},Jc={simple:Yc,full:qc,distance:function(e){return Object(Gc.a)(e,{locale:Wc.a,addSuffix:!0})}},Qc=function(e){var t=e.element,n=e.className,r=e.mode,a=Jc[void 0===r?"simple":r]||Jc.distance;return i.a.createElement("span",{className:Object(on.a)(["item-date",n])},a(_t(t)))},Zc=function(e){var t=e.conversation,n=e.className,r=t.NumMessages,a=void 0===r?0:r;return a<=1?null:i.a.createElement("span",{className:n},"(",a,")")},$c=function(e){var t=e.labels,n=e.element,r=e.mailSettings,a=void 0===r?{}:r,c=e.type,o=e.senders,u=e.unread,s=n.Subject,l=c===bt;return i.a.createElement("div",{className:"flex-item-fluid flex flex-nowrap flex-column flex-spacebetween item-titlesender"},i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"flex-item-fluid flex w0 pr1"},l?i.a.createElement(Zc,{className:Object(on.a)(["mr0-25",u&&"bold"]),conversation:n}):i.a.createElement(Vc,{message:n,mailSettings:a}),i.a.createElement("span",{className:Object(on.a)(["inbl mw100 ellipsis",u&&"bold"])},s)),i.a.createElement(Qc,{element:n,className:u?"bold":void 0})),i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"flex-item-fluid flex pr1"},i.a.createElement("span",{className:Object(on.a)(["inbl mw100 ellipsis",u&&"bold"])},o)),i.a.createElement("div",{className:"item-icons"},i.a.createElement(Sc,{max:4,labels:t,element:n})," ",i.a.createElement(Lc,{element:n,type:c})," ",i.a.createElement(Ac,{element:n,type:c}))))},eo=n("0xu3"),to=function(e){var t=e.labels,n=e.element,r=e.mailSettings,a=void 0===r?{}:r,c=e.type,o=e.senders,u=e.unread,s=n.Subject,l=n.Size,f=c===bt,m=Object(eo.a)(l);return i.a.createElement("div",{className:"flex-item-fluid flex flex-nowrap flex-row flex-spacebetween item-titlesender"},i.a.createElement("div",{className:Object(on.a)(["w20 flex mauto pr1",u&&"bold"])},o),i.a.createElement("div",{className:"flex-item-fluid flex mauto"},f?i.a.createElement(Zc,{className:Object(on.a)(["mr0-25",u&&"bold"]),conversation:n}):i.a.createElement(Vc,{message:n,mailSettings:a}),i.a.createElement("span",{className:Object(on.a)(["inbl mw100 ellipsis",u&&"bold"])},s),i.a.createElement(Sc,{max:4,labels:t,element:n}),i.a.createElement(Lc,{element:n,type:c,className:"ml0-5"})),i.a.createElement("span",{className:"mtauto mbauto mr1 ml1 ng-binding"},m),i.a.createElement("span",{className:"mauto"},i.a.createElement(Qc,{element:n,className:u?"bold":void 0})),i.a.createElement("div",{className:"mtauto mbauto ml0-5"},i.a.createElement(Ac,{element:n,type:c})))},no=be.B.SENT,ro=be.B.ALL_SENT,ao=be.B.DRAFTS,co=be.B.ALL_DRAFTS,oo=function(e){var t,n=e.labelID,r=e.labels,a=e.element,c=e.elementID,o=e.mailSettings,u=void 0===o?{}:o,s=e.checked,l=void 0!==s&&s,f=e.onCheck,m=e.onClick,d=a.ID,p=void 0===d?"":d,v=[no,ro,ao,co].includes(n),b=Ut({mailSettings:u,labelID:n}),g=b===bt,h=g?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Senders,n=void 0===t?[]:t;return n.map(La)}(a):[bc(a)],E=g?(void 0===(t=a.Recipients)?[]:t).map(La):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gc(e).map(vc)}(a),O=u.ViewLayout,j=(void 0===O?be.fb.COLUMN:O)===be.fb.COLUMN,x=j?$c:to,y=function(e){return"NumUnread"in e?0!==e.NumUnread:"Unread"in e&&0!==e.Unread}(a);return i.a.createElement("div",{onClick:function(e){var t=e.target;t.classList.contains("item-checkbox")||t.closest(".item-checkbox")?e.stopPropagation():m(a)},className:Object(on.a)(["flex flex-nowrap cursor-pointer",j?"item-container":"item-container-row",c===p&&"item-is-selected",!y&&"read"])},i.a.createElement(Sa,{className:"mr1 item-checkbox",checked:l,onChange:f},Object($.d)(v?E[0]:h[0])),i.a.createElement(x,{labels:r,element:a,mailSettings:u,type:b,senders:(v?E:h).join(", "),unread:y}))},io=(n("M7Sy"),n("uszg")),uo=n("g6eX");function so(){var e=W()(["Seems like you are all caught up for now"]);return so=function(){return e},e}function lo(){var e=W()(["You do not have any messages here"]);return lo=function(){return e},e}function fo(){var e=W()(["No messages found"]);return fo=function(){return e},e}function mo(){var e=W()(["No messages found"]);return mo=function(){return e},e}function po(){var e=W()(["No messages found"]);return po=function(){return e},e}function vo(){var e=W()(["No messages found"]);return vo=function(){return e},e}var bo=function(e){var t=e.labelID===be.B.INBOX,n=!t;return i.a.createElement("div",{className:"m2"},i.a.createElement("figure",{className:"flex-item-fluid aligncenter p3"},!1,n&&i.a.createElement("img",{src:io.a,alt:Object(Y.c)("Search - no results").t(vo())}),t&&i.a.createElement("img",{src:uo.a,alt:Object(Y.c)("Search - no results").t(po())}),i.a.createElement("figcaption",{className:"mt2"},i.a.createElement("h3",{className:"bold"},n?Object(Y.c)("Search - no results").t(mo()):Object(Y.c)("Search - no results").t(fo())),i.a.createElement("p",{"data-if":"folder"},n?Object(Y.c)("Info").t(lo()):Object(Y.c)("Info").t(so())))))},go=function(e){var t=e.labelID,n=e.elementID,r=e.mailSettings,a=void 0===r?{}:r,c=e.elements,u=void 0===c?[]:c,s=e.checkedIDs,l=void 0===s?[]:s,f=e.onCheck,m=e.onClick,d=Object(le.a)(),p=_()(d,1)[0],v=Object(o.useState)(),b=_()(v,2),g=b[0],h=b[1],E=function(e){return function(t){var n=t.target,r=t.nativeEvent.shiftKey,a=[e];if(g&&r){var c=u.findIndex((function(t){return t.ID===e})),o=u.findIndex((function(e){return e.ID===g}));a.push.apply(a,Xe()(u.slice(Math.min(c,o),Math.max(c,o)+1).map((function(e){return e.ID||""}))))}h(e),f(a,n.checked)}};return 0===u.length?i.a.createElement(bo,{labelID:t}):i.a.createElement(i.a.Fragment,null,u.map((function(e){return i.a.createElement(oo,{labels:p,labelID:t,key:e.ID,elementID:n,element:e,checked:l.includes(e.ID||""),onCheck:E(e.ID||""),onClick:m,mailSettings:a})})))},ho=n("KAzH"),Eo=(n("z3V7"),function(e){var t=e.message,n=t.content,r=void 0===n?"":n,a=t.data,c=Ja(void 0===a?{}:a);return i.a.createElement("div",{className:Object(on.a)(["message-content bodyDecrypted",c&&"plain"]),dangerouslySetInnerHTML:{__html:r}})}),Oo=xt,jo=jt;function xo(){var e=W()(["Encrypted message"]);return xo=function(){return e},e}function yo(){var e=W()(["Sender verification failed"]);return yo=function(){return e},e}function wo(){var e=W()(["Stored with zero access encryption"]);return wo=function(){return e},e}function No(){var e=W()(["Stored with zero access encryption"]);return No=function(){return e},e}function ko(){var e=W()(["Sent by ProtonMail with zero access encryption"]);return ko=function(){return e},e}function Ao(){var e=W()(["Sender verification failed"]);return Ao=function(){return e},e}function Co(){var e=W()(["Sent by you with end-to-end encryption"]);return Co=function(){return e},e}function Do(){var e=W()(["Sent by you with end-to-end encryption"]);return Do=function(){return e},e}function So(){var e=W()(["Sender verification failed"]);return So=function(){return e},e}function Lo(){var e=W()(["PGP-signed message from verified address"]);return Lo=function(){return e},e}function Io(){var e=W()(["Stored with zero access encryption"]);return Io=function(){return e},e}function To(){var e=W()(["Sender verification failed"]);return To=function(){return e},e}function Po(){var e=W()(["PGP-encrypted message from verified address"]);return Po=function(){return e},e}function Ro(){var e=W()(["PGP-encrypted message"]);return Ro=function(){return e},e}function Mo(){var e=W()(["Sender verification failed"]);return Mo=function(){return e},e}function Bo(){var e=W()(["End-to-end encrypted message from verified address"]);return Bo=function(){return e},e}function Fo(){var e=W()(["End-to-end encrypted message"]);return Fo=function(){return e},e}var zo={pm:[Object(Y.c)("Message encryption status").t(Fo()),Object(Y.c)("Message encryption status").t(Bo()),Object(Y.c)("Message encryption status").t(Mo())],pgp:[Object(Y.c)("Message encryption status").t(Ro()),Object(Y.c)("Message encryption status").t(Po()),Object(Y.c)("Message encryption status").t(To())],clear:[Object(Y.c)("Message encryption status").t(Io()),Object(Y.c)("Message encryption status").t(Lo()),Object(Y.c)("Message encryption status").t(So())],sentEncrypted:[Object(Y.c)("Message encryption status").t(Do()),Object(Y.c)("Message encryption status").t(Co()),Object(Y.c)("Message encryption status").t(Ao())],auto:[Object(Y.c)("Message encryption status").t(ko())],sentClear:[Object(Y.c)("Message encryption status").t(No()),Object(Y.c)("Message encryption status").t(wo()),Object(Y.c)("Message encryption status").t(yo())],draft:[Object(Y.c)("Message encryption status").t(xo())]},Uo=function(e){return uc(e)?zo.sentEncrypted:nc(e)?zo.auto:ac(e)?zo.sentClear:oc(e)?zo.draft:sc(e)?zo.pm:function(e){return ic(e)&&!ec(e)}(e)?zo.pgp:zo.clear},_o=function(e){var t=e.message,n=e.className,r=function(e){e.data;var t=e.verified,n=void 0===t?0:t;return n===Oo||n===jo}(t),a=fc(t.data),c=function(e){var t=e.data,n=void 0===t?{}:t,r=e.verified,a=void 0===r?0:r,c=Uo(n);return c.length>a&&(mc(n)||!uc(n)||$a(n))?c[a]:c[0]}(t),o=r?"https://protonmail.com/support/knowledge-base/digital-signature/":a?"https://protonmail.com/support/knowledge-base/how-to-use-pgp":"https://protonmail.com/support/knowledge-base/what-is-encrypted/",u=ec(t.data)||uc(t.data)||oc(t.data)||nc(t.data),s=Object(on.a)([n,"no-pointer-events-children"].concat(Xe()(r?[1===t.verified&&"valid-sig",1!==t.verified&&"invalid-sig",u&&"color-pm-blue",a&&"pgp"]:["nodecoration color-global-grey flex",u&&"color-pm-blue"])));return i.a.createElement($r.a,{title:c,className:"inbl"},i.a.createElement(Q.a,{className:s,href:o},i.a.createElement(me.a,{name:"lock",className:"fill-currentColor"})))};function Ko(){var e=W()(["From:"]);return Ko=function(){return e},e}var Ho=function(e){var t=e.message,n=e.labels,r=e.onExpand,a=(t.data||{}).Sender||{},c=a.Name,o=a.Address,u=ac(t.data)?"is-outbound":"is-inbound";return i.a.createElement("div",{className:"message-header message-header-collapsed flex flex-nowrap flex-items-center flex-spacebetween cursor-pointer ".concat(u),onClick:function(e){var t=e.target;t.classList.contains("item-star")||t.closest(".item-star")?e.stopPropagation():r()}},i.a.createElement("div",null,i.a.createElement("span",{className:"mr0-5"},Object(Y.c)("Label").t(Ko())),i.a.createElement("span",{className:"bold mr0-5",title:c},c),i.a.createElement("i",{title:o},"<",o,">"),i.a.createElement(_o,{message:t})),i.a.createElement("div",null,i.a.createElement(Lc,{element:t.data,type:vt}),i.a.createElement(Sc,{element:t.data||{},labels:n,className:"mr1"}),i.a.createElement(Qc,{className:"mr1",element:t.data||{},mode:"distance"}),i.a.createElement(Ac,{element:t.data,type:vt})))},Vo=n("SJRE"),Xo=n("o4nY");function Go(){var e=W()(["Load"]);return Go=function(){return e},e}function Wo(){var e=W()(["This message contains embedded images"]);return Wo=function(){return e},e}function Yo(){var e=W()(["This message contains remote content"]);return Yo=function(){return e},e}var qo=function(e){var t=e.message,n=t.showRemoteImages,r=void 0===n||n,a=t.showEmbeddedImages,c=void 0===a||a,o=e.type,u=e.onLoadImages;return"remote"===o&&!1!==r||"embedded"===o&&!1!==c?null:i.a.createElement("div",{className:"bg-white rounded bordered-container p0-5 mb0-5 flex flex-nowrap"},i.a.createElement(me.a,{name:"insert-image",className:"fill-global-grey mtauto mbauto"}),i.a.createElement("span",{className:"pl0-5 pr0-5 flex-item-fluid"},"remote"===o?Object(Y.c)("Action").t(Yo()):Object(Y.c)("Action").t(Wo())),i.a.createElement("a",{onClick:u,className:"bold"},Object(Y.c)("Action").t(Go())))};function Jo(){var e=W()(["Unsubscribe"]);return Jo=function(){return e},e}function Qo(){var e=W()(["Learn more"]);return Qo=function(){return e},e}function Zo(){var e=W()(["This message is from a mailing list"]);return Zo=function(){return e},e}var $o=function(e){var t=e.message.data;return function(e){return Oc(e,"List-Unsubscribe")||""}(void 0===t?{}:t)?i.a.createElement("div",{className:"bg-white rounded bordered-container p0-5 mb0-5 flex flex-nowrap"},i.a.createElement(me.a,{name:"email",className:"flex-item-noshrink fill-global-grey mtauto mbauto"}),i.a.createElement("span",{className:"pl0-5 pr0-5 flex-item-fluid"},Object(Y.c)("Info").t(Zo())),i.a.createElement("span",{className:"flex-item-noshrink flex"},i.a.createElement(Q.a,{className:"bold mr1 pl0-5 pr0-5",href:"https://protonmail.com/support/knowledge-base/auto-unsubscribe"},Object(Y.c)("Info").t(Qo())),i.a.createElement("a",{className:"bold"},Object(Y.c)("Action").t(Jo())))):null},ei=function(e){var t=e.message,n=e.onLoadRemoteImages,r=e.onLoadEmbeddedImages;return i.a.createElement("section",{className:"ml1 mr1 mt0-5"},i.a.createElement($o,{message:t}),i.a.createElement(qo,{message:t,type:"remote",onLoadImages:n}),i.a.createElement(qo,{message:t,type:"embedded",onLoadImages:r}))};function ti(){var e=W()(["To:"]);return ti=function(){return e},e}var ni=function(e){var t=e.message,n=void 0===t?{}:t,r=n.ToList,a=void 0===r?[]:r,c=n.CCList,o=void 0===c?[]:c,u=n.BCCList,s=void 0===u?[]:u,l=[].concat(Xe()(a),Xe()(s),Xe()(o));return i.a.createElement("div",{className:"flex"},i.a.createElement("span",{className:"opacity-50 flex-self-vcenter container-to"},Object(Y.c)("Label").t(ti())),i.a.createElement("span",{className:"flex-self-vcenter mr1"},l.map((function(e,t){var n=e.Address,r=void 0===n?"":n,a=e.Name,c=void 0===a?"":a;return i.a.createElement("span",{key:t,className:"mr0-5",title:r},c||r,t<l.length-1&&",")}))))};function ri(){var e=W()(["BCC:"]);return ri=function(){return e},e}function ai(){var e=W()(["CC:"]);return ai=function(){return e},e}function ci(){var e=W()(["To:"]);return ci=function(){return e},e}var oi=function(e){var t=e.list;return i.a.createElement("span",{className:"flex-self-vcenter flex flex-column"},t.map((function(e,t){var n=e.Address,r=void 0===n?"":n,a=e.Name,c=void 0===a?"":a;return i.a.createElement("span",{key:t},c||r," ",i.a.createElement("span",{className:"opacity-50"},"<",r,">")," ")})))},ii=function(e){var t=e.message,n=void 0===t?{}:t,r=n.ToList,a=void 0===r?[]:r,c=n.CCList,o=void 0===c?[]:c,u=n.BCCList,s=void 0===u?[]:u;return i.a.createElement("div",{className:"flex flex-column"},a.length>0&&i.a.createElement("span",{className:"flex"},i.a.createElement("span",{className:"opacity-50 container-to"},Object(Y.c)("Label").t(ci())),i.a.createElement("span",{className:"flex-self-vcenter mr1"},i.a.createElement(oi,{list:a}))),o.length>0&&i.a.createElement("span",{className:"flex"},i.a.createElement("span",{className:"opacity-50 container-to"},Object(Y.c)("Label").t(ai())),i.a.createElement("span",{className:"flex-self-vcenter mr1"},i.a.createElement(oi,{list:o}))),s.length>0&&i.a.createElement("span",{className:"flex"},i.a.createElement("span",{className:"opacity-50 container-to"},Object(Y.c)("Label").t(ri())),i.a.createElement("span",{className:"flex-self-vcenter mr1"},i.a.createElement(oi,{list:s}))))},ui=function(e){var t=e.content,n=e.children,r=e.autoClose,a=Cn()(e,["content","children","autoClose"]),c=Object(o.useState)(Object(on.b)("dropdown")),u=_()(c,1)[0],s=Object(Tn.a)(),l=s.anchorRef,f=s.isOpen,m=s.toggle,d=s.close;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Pn.a,k()({},a,{buttonRef:l,isOpen:f,onClick:m,caretClassName:null}),t),i.a.createElement(Rn.a,{id:u,autoClose:r,isOpen:f,anchorRef:l,onClose:d},n({onClose:d})))};n("A5oT");function si(){var e=W()(["Show details"]);return si=function(){return e},e}function li(){var e=W()(["Hide details"]);return li=function(){return e},e}function fi(){var e=W()(["Size:"]);return fi=function(){return e},e}function mi(){var e=W()(["From:"]);return mi=function(){return e},e}var di=function(e){var t=e.labels,n=e.message,r=e.messageLoaded,a=e.onLoadRemoteImages,c=e.onLoadEmbeddedImages,o=e.mailSettings,u=e.onCollapse,s=e.onCompose,l=Object(ho.a)(),f=l.state,m=l.toggle,d=(n.data||{}).Sender||{},p=d.Name,v=d.Address,b=ac(n.data)?"is-outbound":"is-inbound",g=function(e){return function(){s({action:e,referenceMessage:n})}};return i.a.createElement("div",{className:"message-header message-header-expanded ".concat(b)},i.a.createElement("div",{className:"flex flex-nowrap flex-items-center flex-spacebetween pt1 pl1 pr1 pb0-5 cursor-pointer",onClick:function(e){e.target.closest(".stop-propagation")?e.stopPropagation():u()}},i.a.createElement("div",null,i.a.createElement("span",{className:"mr0-5"},Object(Y.c)("Label").t(mi())),i.a.createElement("span",{className:"bold mr0-5",title:p},p),i.a.createElement("i",{title:v},"<",v,">"),i.a.createElement(_o,{message:n,className:"stop-propagation"})),i.a.createElement("div",null,i.a.createElement(Qc,{element:n.data||{},mode:"distance"}))),i.a.createElement("div",{className:"flex flex-nowrap flex-items-start flex-spacebetween ml1 mr1 mb0-5"},f?i.a.createElement(ii,{message:n.data}):i.a.createElement(ni,{message:n.data}),i.a.createElement("div",null,i.a.createElement(Lc,{element:n.data||{},type:vt})," ",i.a.createElement(Sc,{max:4,element:n.data||{},labels:t})," ",i.a.createElement(Vc,{message:n.data||{},mailSettings:o})," ",i.a.createElement(Ac,{element:n.data||{},type:vt}))),f?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"ml1 mr1 mb0-5"},i.a.createElement("span",{className:"mr0-5"},Object(Y.c)("Label").t(fi())),i.a.createElement("span",null,Object(eo.a)((n.data||{}).Size||0))),i.a.createElement("div",{className:"ml1 mr1 mb0-5"},i.a.createElement(Qc,{element:n.data||{},mode:"full"}))):null,i.a.createElement("div",{className:"flex flex-spacebetween ml1 mr1 mb1 flex-nowrap"},i.a.createElement("a",{onClick:m,className:"bold flex-self-vcenter"},f?Object(Y.c)("Action").t(li()):Object(Y.c)("Action").t(si())),i.a.createElement("div",null,i.a.createElement(Vo.a,{className:"mr1"},i.a.createElement(ui,{autoClose:!1,content:i.a.createElement(me.a,{name:"folder"})},(function(e){var t=e.onClose;return i.a.createElement(pa,{selectedIDs:[(n.data||{}).ID||""],type:vt,onClose:t})})),i.a.createElement(ui,{autoClose:!1,content:i.a.createElement(me.a,{name:"label"})},(function(e){var t=e.onClose;return i.a.createElement(ya,{selectedIDs:[(n.data||{}).ID||""],type:vt,onClose:t})}))),i.a.createElement(Vo.a,null,i.a.createElement(Xo.a,{disabled:!r,onClick:g(pt.REPLY)},i.a.createElement(me.a,{name:"reply"})),i.a.createElement(Xo.a,{disabled:!r,onClick:g(pt.REPLY_ALL)},i.a.createElement(me.a,{name:"reply-all"})),i.a.createElement(Xo.a,{disabled:!r,onClick:g(pt.FORWARD)},i.a.createElement(me.a,{name:"forward"}))))),i.a.createElement(ei,{message:n,onLoadRemoteImages:a,onLoadEmbeddedImages:c}))},pi=n("fDnD"),vi=n.n(pi),bi=n("0Zqm"),gi=n("FaOd"),hi=n("ID4j"),Ei=n("dG5C"),Oi=n("QbOs"),ji=function(e){return{method:"get",url:"attachments/".concat(e),output:"arrayBuffer"}},xi=function(){var e=tt()($e.a.mark((function e(t,n){var r;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint8Array(t),e.prev=1,e.t0=gi.b,e.next=5,Object(hi.e)(r);case 5:return e.t1=e.sent,e.t2=[n],e.t3={message:e.t1,sessionKeys:e.t2,format:"binary"},e.next=10,(0,e.t0)(e.t3);case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t4=e.catch(1),console.error(e.t4),e.t4;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),yi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ID,n=arguments.length>1?arguments[1]:void 0;return n(ji(t))},wi=function(){var e=tt()($e.a.mark((function e(t,n){var r,a,c;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(Ei.d)(Object(Ei.g)(t.KeyPackets)),e.next=3,Object(hi.e)(r);case 3:return e.t0=e.sent,(a={message:e.t0}).privateKeys=n.privateKeys,e.next=8,Object(Oi.a)(a);case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ni=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(t,r);case 2:return a=e.sent,e.prev=3,e.next=6,wi(t,n);case 6:return c=e.sent,e.next=9,xi(a,c);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(3),o=Object(Ei.e)([Object(Ei.d)(Object(Ei.g)(t.KeyPackets)),new Uint8Array(a)]),{data:t,binary:o,error:e.t0};case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ki=function(){var e=tt()($e.a.mark((function e(){var t,n,r,a,c,o,i=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1&&void 0!==i[1]?i[1]:{},i.length>2&&void 0!==i[2]&&i[2],r=i.length>3?i[3]:void 0,a=i.length>4?i[4]:void 0,o=t.ID||"",!t.Preview){e.next=8;break}return e.abrupt("return",{data:t.Preview});case 8:if(!r.has(o)){e.next=12;break}c=r.get(o),e.next=16;break;case 12:return e.next=14,Ni(t,n,a);case 14:c=e.sent;case 16:return r.set(o,c),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ai=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return ki(e,t,!1,n,r)},Ci=function(){var e=tt()($e.a.mark((function e(t,n,r,a){var c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ki(t,n,!1,r,a);case 3:return c=e.sent,o=c.data,e.abrupt("return",{attachment:t,data:o});case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0.data){e.next=12;break}return e.abrupt("return",{attachment:{Name:"".concat(t.Name,".pgp"),MIMEType:"application/pgp",ID:t.ID},data:e.t0.data,isError:!0});case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Di=function(){var e=tt()($e.a.mark((function e(t){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(bi.a)(new Blob([t.data],{type:t.attachment.MIMEType}),t.attachment.Name);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Si=function(){var e=tt()($e.a.mark((function e(t,n,r,a){var c;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ci(t,n,r,a);case 2:return c=e.sent,e.abrupt("return",Di(c));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Li=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c,o,i;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data||{},c=a.Attachments,o=(void 0===c?[]:c).reduce((function(e,t){var n=t.Name||"";if(e.map[n]){e.map[n].index++;var r=n.split("."),a=r.pop(),c="".concat(r.join(".")," (").concat(e.map[n].index,").").concat(a);t.Name=c}else e.map[n]={index:0};return e.list.push(t),e}),{list:[],map:{}}),i=o.list,e.abrupt("return",Promise.all(i.map((function(e){return Ci(e,t,n,r)}))));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ii=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"Attachments-".concat(e.Subject,".zip")},Ti=function(){var e=tt()($e.a.mark((function e(){var t,n,r,a,c,o,i=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1?i[1]:void 0,r=i.length>2?i[2]:void 0,e.next=5,Li(t,n,r);case 5:return a=e.sent,c=new vi.a,a.forEach((function(e){var t=e.attachment.Name,n=void 0===t?"":t,r=e.data;return c.file(n,r)})),e.next=10,c.generateAsync({type:"blob"});case 10:o=e.sent,Object(bi.a)(o,Ii(t.data));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pi=n("SxKE"),Ri=function(){var e=Object(Pi.a)();return e.has("Attachments")||e.set("Attachments",new Map),e.get("Attachments")},Mi={zip:"file-rar-zip",mp3:"file-video",javascript:"file-unknown",vcard:"file-unknown",xls:"file-xls",mov:"file-video",pdf:"file-pdf",power:"file-ppt",word:"file-doc"},Bi={"pgp-keys":"fa-key"},Fi=function(e){var t,n,r,a=e.attachment,c=e.message,u=Ri(),s=Object(fn.a)(),l=Object(o.useState)(!1),f=_()(l,2),m=f[0],d=f[1],p=Object(o.useState)(!1),v=_()(p,2),b=v[0],g=v[1],h=Object(eo.a)(a.Size),E=(t=a.MIMEType,n=void 0===t?"":t,r=Object.keys(Mi).find((function(e){return n.includes(e)})),Mi[r||""]||""||"file-image"),O=!function(e){var t=e.MIMEType,n=void 0===t?"":t,r=Object.keys(Bi).find((function(e){return n.includes(e)}));return Bi[r||""]||""}(a),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Headers,n=(t=void 0===t?{}:t)["content-disposition"],r=t.embedded;return"inline"===n||1===Number(r)}(a),x=Object(on.a)(["listAttachments-icon listAttachments-signature-icon mauto file-outer-icon",O&&"single",j&&"is-embedded"]),y=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Si(a,c,u,s);case 3:d(!1),g(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=m?"":b?"download":E,N=!O&&!m&&!b;return i.a.createElement("li",{className:"mr1 mb1"},i.a.createElement("a",{className:"message-attachment inline-flex flex-nowrap mw100 pm-button listAttachments-item relative no-pointer-events-children",title:"".concat(a.Name," ").concat(h),onClick:y},i.a.createElement("span",{className:"flex flex-item-noshrink message-attachmentIcon relative flex"},i.a.createElement(me.a,{name:w,size:20,className:x,"aria-busy":m}),N&&i.a.createElement(me.a,{name:"key",className:"file-inner-icon mauto"})),i.a.createElement("span",{className:"inbl ellipsis flex flex-column message-attachmentInfo"},i.a.createElement("span",{className:"bl ellipsis mw100"},a.Name),i.a.createElement("span",{className:"bl message-attachmentSize"},h))))};function zi(){var e=W()(["Download all"]);return zi=function(){return e},e}function Ui(){var e=W()([""," embedded image"]);return Ui=function(){return e},e}function _i(){var e=W()([""," file attached"]);return _i=function(){return e},e}var Ki,Hi=function(e){var t=e.message,n=Ri(),r=Object(fn.a)(),a=Object(o.useState)(!1),c=_()(a,2),u=c[0],s=c[1],l=Object(o.useState)(!1),f=_()(l,2),m=f[0],d=f[1],p=Object(eo.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jc(e).reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Size,r=void 0===n?0:n;return e+ +r}),0)}(t.data)),v=jc(t.data),b=v.length,g=t.numEmbedded||0,h=b-g,E=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,Ti(t,n,r);case 3:s(!1),d(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"message-attachments"},i.a.createElement("div",{className:"flex flex-spacebetween mb1"},i.a.createElement("span",{className:"title"},i.a.createElement("strong",{className:"listAttachments-title-size mr0-5"},p),h>0&&i.a.createElement("span",{className:"listAttachments-title-files mr0-5"},i.a.createElement(me.a,{name:"attach",className:"mr0-5"}),Object(Y.c)("Info").ngettext(Object(Y.msgid)(_i(),h),"".concat(h," files attached"),h)),g>0&&i.a.createElement("span",{className:"listAttachments-title-embedded mr0-5"},i.a.createElement(me.a,{name:"file-image",className:"mr0-5"}),Object(Y.c)("Info").ngettext(Object(Y.msgid)(Ui(),g),"".concat(g," embedded images"),g))),b>0&&i.a.createElement("div",null,i.a.createElement("button",{onClick:E,className:"link strong mr0-5"},Object(Y.c)("Download attachments").t(zi())),(m||u)&&i.a.createElement(me.a,{name:m?"download":"","aria-busy":u}))),i.a.createElement("ul",{className:"listAttachments-list unstyled flex mb0"},v.map((function(e){return i.a.createElement(Fi,{key:e.ID,attachment:e,message:t})}))))},Vi=n("pqLH"),Xi="",Gi="",Wi="<",Yi=">";Ki={},se()(Ki,Wi,Xi),se()(Ki,Yi,Gi),se()(Ki,Xi,Wi),se()(Ki,Gi,Yi);var qi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.charAt(0).toUpperCase()+e.slice(1)};var Ji=function(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")},Qi=n("wMS7"),Zi=n.n(Qi);function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var eu=new RegExp("((url)(\\(|&(#40|#x00028|lpar);))","gi"),tu=["data-src","src","srcset","background","poster","xlink:href"].reduce((function(e,t){return e.LIST_PROTON_ATTR.push("proton-".concat(t)),e.MAP_PROTON_ATTR[t]=!0,e}),{LIST_PROTON_ATTR:[],MAP_PROTON_ATTR:Object.create(null)}),nu=tu.LIST_PROTON_ATTR,ru=tu.MAP_PROTON_ATTR,au={default:{ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|blob|xmpp|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ADD_TAGS:["proton-src","base","proton-svg"],ADD_ATTR:["target","proton-src"],FORBID_TAGS:["style","input","form"],FORBID_ATTR:["srcset"]},raw:{WHOLE_DOCUMENT:!0,RETURN_DOM:!0},html:{WHOLE_DOCUMENT:!1,RETURN_DOM:!0},protonizer:{FORBID_ATTR:{},ADD_ATTR:["target"].concat(nu),WHOLE_DOCUMENT:!0,RETURN_DOM:!0},content:{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!1,RETURN_DOM:!0,RETURN_DOM_FRAGMENT:!0}},cu=function(e){var t,n=(t=function(e){return function(t,n){return String.fromCodePoint(Number.parseInt(n,e))}},function(e){return e.replace(/&(?:amp|lt|gt|quot|#39);/g,{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"})}(e).replace(/&#(\d+)(;|(?=[^\d;]))/g,t(10)).replace(/&#x([0-9A-Fa-f]+)(;|(?=[^\d;]))/g,t(16)).replace(/\\([0-9A-Fa-f]{1,6}) ?/g,t(16)).replace(/\\(.)/g,(function(e,t){return t}))),r=n!==e,a=n.replace(/\\r/g,"r").replace(eu,"proton-url(");return a===n?e:r?function(e){return e.replace(/[&<>"']/g,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})}(a):a};function ou(e){return 1!==e.nodeType?e:(Array.from(e.attributes).forEach((function(t){var n=t.name;if(ru[n]&&(e.setAttribute("proton-"+n,e.getAttribute(n)||""),e.removeAttribute(n)),"style"===n){var r=cu(e.getAttribute("style")||"");e.setAttribute("style",r)}})),e)}var iu=function(e){if(e)return Zi.a.addHook("beforeSanitizeElements",ou);Zi.a.removeHook("beforeSanitizeElements")},uu=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},au.default,{},au[e]||{})},su=function(e){var t=uu(e);return function(n){Zi.a.clearConfig();var r=Zi.a.sanitize(n,t);return iu(!1),"str"===e?r+"":r}},lu=su("str"),fu=(su("raw"),function(e,t){var n=su("protonizer");return iu(t),n(e)}),mu=(su("content"),function(e,t){return(e.matches||e.msMatchesSelector).call(e,t)}),du=function(e){var t=document.createElement("div");return t.innerHTML=e,t},pu="(".concat(["svg"].join("|"),")"),vu='("'.concat('(\\\\.|[^"\\\\])','*")'),bu="(?=(".concat('([^"><\\\\]|\\\\[^><])',"|").concat(vu,")*>)"),gu=new RegExp("([^-])"+pu+bu,"gi");function hu(e,t,n){return e.replace(/src="data:image\/([a-zA-Z]*);base64,([^\"]*)\"/g,(function(e){var r="pt".concat(Math.random().toString(32).slice(2,12),"-").concat(Date.now());return n&&t.put(r,e),'data-proton-replace-base="'.concat(r,'"')}))}function Eu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(gu,"$1proton-$2")}var Ou=function(){var e=tt()($e.a.mark((function e(t){var n,r,a,c,o,i,u,s=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.raw,r=t.action,a=s.length>1&&void 0!==s[1]?s[1]:{},c=a.cache,o=a.activeCache,i=hu(n,c,void 0===o||o),u="user.inject"!==r,e.abrupt("return",{document:fu(Eu(i),u)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ju=["ftp://","http://","https://","xmpp:","tel:","callto:"],xu=ju.concat(["mailto:"]),yu=ju.reduce((function(e,t){return e[t]=!0,e}),{}),wu=function(e){return e.getAttribute("href").trim().toLowerCase()},Nu=function(e){if(mu(e,':not([href=""]):not([href^="#"])')&&!function(e){return xu.some((function(t){return wu(e).startsWith(t)}))}(e)&&"A"===e.nodeName){var t=e.getAttribute("href");e.setAttribute("href","http://".concat(t))}},ku=function(e){(function(e){var t=wu(e);return""===t||yu[t]})(e)&&(e.style.pointerEvents="none")},Au=function(e){var t=e.document;return Xe()(t.querySelectorAll("[href]")).forEach((function(e){!function(e){if(mu(e,':not([href=""]):not([href^="#"])')){var t=e.getAttribute("href")||"",n=0===t.indexOf("http"),r=0===t.indexOf("/");(n||r)&&e.setAttribute("target","_blank")}}(e),function(e){e.setAttribute("rel","noreferrer nofollow noopener")}(e),Nu(e),ku(e)})),{document:t}},Cu=n("O4yn"),Du=n.n(Cu),Su=/^cid:/g,Lu=function(e){var t="".concat(e||"").trim();return['"',"'","<"].indexOf(t.charAt(0))>-1&&['"',"'",">"].indexOf(t.charAt(t.length-1))>-1?t.substr(1,t.length-2):t},Iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["content-id"]?Lu(e["content-id"]):e["content-location"]?Lu(e["content-location"]):""},Tu=function(e,t){if(!e)return[];var n=['img[src="'.concat(e,'"]'),'img[src="cid:'.concat(e,'"]'),'img[data-embedded-img="'.concat(e,'"]'),'img[data-embedded-img="cid:'.concat(e,'"]'),'img[data-src="cid:'.concat(e,'"]'),'img[proton-src="cid:'.concat(e,'"]')];return Xe()(t.querySelectorAll(n.join(", ")))},Pu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).filter((function(e){return e.startsWith("content")})).reduce((function(t,n){var r=n.split("-"),a=_()(r,2)[1];return t["content".concat(qi(a))]=e[n],t}),Object.create(null));return{formatted:Du.a.factory(t),headers:t}},Ru={},Mu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ID,n=void 0===t?"":t;return Ru[n]||{}},Bu=function(e){var t=(e.data||{}).Attachments||[];if(!t.length||!e.document)return[];var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){var n=e.Headers,r=Iu(void 0===n?{}:n);return Tu(r,t).length}))}(t,e.document);return n.forEach((function(t){!function(e,t){var n=e.ID,r=void 0===n?"":n,a=t.Headers,c=void 0===a?{}:a,o=t.Name,i=void 0===o?"":o;!Ru[r]&&(Ru[r]={});var u=Iu(c);c.embedded="1",Ru[r][u]={Headers:c,Name:i}}(e.data||{},t)})),n},Fu=function(e){var t=(e.data||{}).Attachments||[],n=Mu(e.data);return Object.keys(n).reduce((function(e,r){var a=((n[r]||{}).Headers||{})["content-id"],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("inline"!==e["content-disposition"]){var t=Pu(e),n=t.formatted,r=void 0===n?{}:n,a=r.contentDisposition()||{},c=a.params,o=(c=void 0===c?{}:c).filename,i=void 0===o?"":o;if(i)return i.replace(/"/g,"")}return""}(n[r].Headers),o=t.find((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Headers,n=void 0===t?{}:t,r=e.Name,o=void 0===r?"":r;return n["content-id"]?n["content-id"]===a:!!n["content-location"]&&o===c}));return o&&e.push({cid:r,attachment:o}),e}),[])},zu=function(){return window.URL||window.webkitURL},Uu={},_u={},Ku=function(e){var t=oc(e);return"".concat(t?"draft_":"").concat(e.ConversationID||e.ID).trim()};var Hu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Mu(e),r=n[t]||{},a=r.Headers,c=void 0===a?{}:a,o=Ku(e);return _u[o]=_u[o]||[],function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(_u[o]){var r=new Blob([e],{type:n}),a=zu().createObjectURL(r);Uu[t]={url:a,isContentLocation:void 0!==c["content-location"]&&void 0===c["content-id"]},r=null,a=null,_u[o].push(t)}}},Vu=function(e){return Uu[e]||{}},Xu=function(e){return!!Uu[e]},Gu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("data:")},Wu=function(e){return function(e,t){var n,r=document.createElement("div");r.innerHTML=t;var a=r.firstChild;a.innerHTML=e.outerHTML,null===(n=e.parentNode)||void 0===n||n.insertBefore(a,e),e.remove()}(e,'<div class="image loading"></div>')},Yu=function(e){var t=e.getAttribute("data-embedded-img")||"";if(Gu(t))return t;var n=function(e){return(e.getAttribute("data-embedded-img")||"").replace(Su,"")}(e),r=Vu(n).url;return void 0===r?"":r},qu=function(e,t,n,r){if(e.document){var a=e.showEmbeddedImages;return Xe()(e.document.querySelectorAll("img[proton-src]")).forEach((function(c){var o=c.getAttribute("proton-src")||void 0;c.setAttribute("referrerPolicy","no-referrer");var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.replace(Su,"");return Mu(e)[n]||{}}(e.data,o);if(c.classList.contains("proton-embedded")||c.classList.add("proton-embedded"),c.parentElement&&(i&&Object.keys(i).length>0||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("cid:")}(o)&&c.parentElement.removeChild(c),Gu(o))))if(t){if(c.setAttribute("data-embedded-img",o||""),c.removeAttribute("proton-src"),n){var u=Yu(c);return void(u&&c.setAttribute("src",u))}r||(!c.parentElement.classList.contains("loading")&&Wu(c),c.removeAttribute("src"))}else a=!1,i&&c.setAttribute("alt",i.Name||"")})),a}},Ju=function(e,t,n,r){Promise.all(t.map(function(){var t=tt()($e.a.mark((function t(a){return $e.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ai(a,e,r,n);case 2:return t.next=4,Object(Vi.b)(1e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},Qu={blob:function(e,t,n){e.forEach((function(e){e.removeAttribute("data-src"),e.getAttribute("proton-src")||(e.setAttribute("data-src",n),e.setAttribute("data-embedded-img",t),e.classList.add("proton-embedded"))}))},cid:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){e.forEach((function(e){e.removeAttribute("data-embedded-img"),e.removeAttribute("src"),e.setAttribute("data-src","cid:".concat(t))}))}))},Zu=function(e,t){if(e.document){var n=e.document;n.innerHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/ src=/g," data-src=")}(n.innerHTML),Object.keys(Mu(e.data)).forEach((function(e){var r=Tu(e,n);if(r.length){var a=Vu(e).url,c=void 0===a?"":a;(Qu[t]||Ta.c)(r,e,c)}})),n.innerHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/ data-src=/g," src=")}(n.innerHTML)}},$u=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Fu(t),c=a.map((function(e){return e.attachment})),(o=a.filter((function(e){var t=e.attachment;return t.KeyPackets||t.Encrypted===Mt})).filter((function(e){var t=e.cid;return!Xu(t)})).map(function(){var e=tt()($e.a.mark((function e(a){var c,o,i,u;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.cid,o=a.attachment,i=Hu(t.data,c),e.next=4,Ai(o,t,r,n);case 4:return u=e.sent,e.abrupt("return",i(u.data,o.MIMEType));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).length){e.next=6;break}return Ju(t,c,n,r),e.abrupt("return",{});case 6:return e.next=8,Promise.all(o);case 8:return Ju(t,c,n,r),e.abrupt("return",a.reduce((function(e,t){var n=t.cid;return e[n]=Vu(n),e}),{}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),es=function(){var e=tt()($e.a.mark((function e(t,n){var r,a,c,o,i,u,s,l,f,m;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.attachmentsCache,a=n.api,c=n.mailSettings,o=c.ShowImages,i=void 0===o?0:o,u=!0===t.showEmbeddedImages||i===be.ab.EMBEDDED,s=t.action===pt.REPLY||t.action===pt.REPLY_ALL||t.action===pt.FORWARD,!1,l=Bu(t),f=qu(t,u,s,!1),m="blob",0!==l.length&&u){e.next=12;break}0,e.next=15;break;case 12:return e.next=14,$u(t,a,r);case 14:Zu(t,m);case 15:return e.abrupt("return",{document:t.document,showEmbeddedImages:f,numEmbedded:l.length});case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ts=function(e){var t=e.document,n=Xe()(t.querySelectorAll('img[src="/img/app/welcome_lock.gif"]'));return n.length>0&&n.forEach((function(e){e.src="/assets/img/emails/welcome_lock.gif"})),{document:t}};function ns(){var e=W()(["Show previous message"]);return ns=function(){return e},e}var rs,as=[".protonmail_quote",".gmail_quote",".yahoo_quoted",".gmail_extra",".moz-cite-prefix","#isForwardContent","#isReplyContent","#mailcontent:not(table)","#origbody","#reply139content","#oriMsgHtmlSeperator",'blockquote[type="cite"]'].map((function(e){return"".concat(e,":not(:empty)")})).join(","),cs=function(e){var t=e.document,n=Xe()(t.querySelectorAll(as)),r=t.textContent,a=!1;return n.forEach((function(e){if(!a){var t=e.textContent,n=r.split(t),c=_()(n,2),o=c[0],i=void 0===o?"":o,u=c[1],s=void 0===u?"":u;if(t.length<r.length&&i.length&&!s.length){var l=document.createElement("button"),f=Object(Y.c)("Title").t(ns());l.className="pm-button pm-button--small more proton-message-blockquote-toggle",l.textContent="...",l.setAttribute("title",f),e.parentNode.insertBefore(document.createElement("BR"),e),e.parentNode.insertBefore(l,e),a=!0}}})),{document:t}},os=function(e){var t=e.document,n=t.firstElementChild;return n&&/absolute/.test(n.style.position)&&(n.style.position="inherit"),{document:t}},is=n("628V"),us=n.n(is),ss=n("DwX5"),ls=n.n(ss),fs=n("tCnl"),ms=n.n(fs),ds=["notify@protonmail.com"],ps=["url","xlink:href","srcset","src","svg","background","poster"].map((function(e){return"proton-".concat(e)})),vs=(rs=ps.map((function(e){return"proton-src"===e?"".concat(e,'=(?!"(cid|data):)'):e})).join("|"),"(".concat(rs,")"));function bs(e){var t=ps.map((function(e){var t=e.split(":"),n=_()(t,1)[0];return"[".concat(n,"]")})).concat("[style]").join(", ");return[].slice.call(e.querySelectorAll(t)).reduce((function(e,t){if(t.hasAttribute("proton-src")){var n=t.getAttribute("proton-src");if(-1!==n.indexOf("cid:"))return e;if(-1!==n.indexOf("data:"))return e}return e.push(function(e){return ms()(ls()((function(e){return-1!==ps.indexOf(e.name)})),us()((function(e,t){return e["".concat(t.name)]=t.value,e}),{}))(e.attributes)}(t)),e}),[])}var gs=function(e,t){var n=e.data,r=void 0===n?{}:n,a=e.document,c=void 0===a?null:a,o=e.showRemoteImages,i=void 0!==o&&o,u=t.action,s=void 0===u?null:u,l=t.mailSettings,f=new RegExp(vs,"g"),m=i||!!(l.ShowImages&be.ab.REMOTE||ds.includes(r.Sender.Address)),d=c.innerHTML,p=f.test(d);return m&&("user.inject"===s?bs(c):c.innerHTML=d.replace(f,(function(e,t){return t.substring(7)}))),{document:c,showRemoteImages:p?m:void 0}},hs=[{selector:'a:not([href^="http"])',attribute:"href"},{selector:'img:not([src^="http"]):not([proton-src^="cid"])',attribute:"proton-src"}],Es=function(e){var t=e.document,n=t.querySelector("base");if(!n||!n.getAttribute("href"))return{document:t};var r=function(e){var t=e.getAttribute("href");return"/"!==t.substr(-1,1)?"".concat(t,"/"):t}(n),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n.startsWith("http")||e.setAttribute(t,r+n)};return hs.forEach((function(e){var n=e.selector,r=e.attribute;Xe()(t.querySelectorAll(n)).forEach((function(e){var t="proton-".concat(r),n=e.getAttribute(r)||"",c=e.getAttribute(t)||"",o="/"===n.charAt(0)?n.slice(1):n;!c&&a(e,r,o),c&&a(e,t,c)}))})),{document:t}},Os=n("b7Ss"),js=n("PtV9"),xs=n("3rzI"),ys=function(e,t,n,r){return t.map((function(t,n){return function(e,t,n,r,a){var c,o,i,u,s,l,f,m,d,p,v,b,g,h=function(e,t,n){return"".concat("PGPAttachment","_").concat(e.ID,"_").concat(t.checksum,"_").concat(n)}(e,t,n),E={ID:h,Headers:(c=t,o=c.generatedFileName,i=void 0===o?"":o,u=c.contentDisposition,s=void 0===u?"":u,l=c.contentId,f=void 0===l?"":l,m=c.transferEncoding,d=void 0===m?"":m,p=c.contentType,v=void 0===p?"":p,b={},g="; filename="+JSON.stringify(i),b["content-disposition"]=s+g,/^.*@mailparser$/.test(f)||(b["content-id"]=/^<.*>$/.test(f)?f:"<".concat(f,">")),"inline"===s.toLowerCase()&&(b.embedded=1),d&&(b["content-transfer-encoding"]=d),b["content-type"]=v+g,b),Name:t.generatedFileName,KeyPackets:null,MIMEType:t.contentType,Signature:null,Size:t.length,Encrypted:Mt},O={data:t.content};return a.set(h,O),E}(e,t,n,0,r)}))};function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ks(){var e=W()(["Message content if empty"]);return ks=function(){return e},e}function As(){var e=W()(["Encrypted Headers filename"]);return As=function(){return e},e}var Cs=function(e,t){var n=xt,r=yt;return t.length||e!==n?e:r},Ds=function(){var e=tt()($e.a.mark((function e(t,n,r,a){var c,o,i,u,s,l,f,m,d,p,v;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(Y.c)("Encrypted Headers").t(As()),o=(t.Sender||{}).Address,e.next=4,Object(gi.a)({message:t.Body,messageDate:Ec(t),privateKeys:n,publicKeys:r,headerFilename:c,sender:o});case 4:return i=e.sent,e.next=7,i.getBody();case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:return u=e.t0,s=u.body,l=void 0===s?Object(Y.c)("Message empty").t(ks()):s,f=u.mimetype,m=void 0===f?be.G.PLAINTEXT:f,e.t1=Cs,e.next=18,i.verify();case 18:return e.t2=e.sent,e.t3=r,d=(0,e.t1)(e.t2,e.t3),e.t4=ys,e.t5=t,e.next=25,i.getAttachments();case 25:return e.t6=e.sent,e.t7=d,e.t8=a,p=(0,e.t4)(e.t5,e.t6,e.t7,e.t8),e.next=31,i.getEncryptedSubject();case 31:return v=e.sent,e.abrupt("return",{raw:l,data:Ns({},t,{Attachments:p}),verified:d,encryptedSubject:v,mimetype:m});case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ss=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c,o,i;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gi.c)({message:t.Body,messageDate:Ec(t),privateKeys:n,publicKeys:r});case 2:return a=e.sent,c=a.data,o=a.verified,i=Cs(void 0===o?Ot:o,r),e.abrupt("return",{raw:c,verified:i,publicKeys:r,privateKeys:n});case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ls=function(){var e=Object(Os.a)(),t=Object(js.a)(),n=Ri();return Object(o.useCallback)(function(){var r=tt()($e.a.mark((function r(a){var c,o,i,u,s,l,f,m,d;return $e.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=a.data,o=void 0===c?{}:c,r.next=3,Promise.all([e((o.Sender||{}).Address),t(o.AddressID)]);case 3:if(i=r.sent,u=_()(i,2),s=u[0].publicKeys,l=void 0===s?[]:s,f=u[1],m=Object(xs.i)(f),d=m.privateKeys,!qa(o)){r.next=11;break}return r.abrupt("return",Ds(o,d,l,n));case 11:return r.abrupt("return",Ss(o,d,l));case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[e,t,n])},Is=n("Xrgn"),Ts=n("+q81"),Ps=n("8hY9");function Rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ms(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bs=Object(o.createContext)(null),Fs=function(e){var t=e.children,n=Object(H.a)().subscribe,r=Object(Is.a)((function(){return Object(Ts.a)(Object(Ps.a)({max:50}))}));return Object(o.useLayoutEffect)((function(){return n((function(e){var t=e.Messages;if(Array.isArray(t)){var n=!0,a=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var u=o.value,s=u.ID,l=u.Action,f=u.Message;r.has(s)&&(l===be.s.DELETE&&r.delete(s),l!==be.s.UPDATE_DRAFT&&l!==be.s.UPDATE_FLAGS||r.set(s,Ms({},r.get(s),{},f)))}}catch(m){a=!0,c=m}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}}}))}),[]),i.a.createElement(Bs.Provider,{value:r},t)},zs=n("li2R"),Us=n("pdRq");var _s=/(.*)\s*<([^>]*)>/,Ks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return be.W.test(e)},Hs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase()},Vs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Hs(e).replace(/(\+[^@]*)@/,"@").replace(/[._-](?=[^@]*@)/g,"")},Xs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Vs(t);return e.find((function(e){var t=e.Email;return Vs(t)===n}))},Gs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!e&&!e.Receive&&!!t.length},Ws=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!Gs(e,t)},Ys=function(e){var t=_s.exec(e);return null!==t?{Name:t[1],Address:t[2]}:{Name:e,Address:e}},qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.Address&&e.Name&&e.Address!==e.Name?"".concat(e.Name," <").concat(e.Address,">"):e.Address===e.Name?e.Address||"":"".concat(e.Name," ").concat(e.Address)},Js=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.AddressID,r=void 0===n?"":n,a=e.filter((function(e){return 1===e.Status})).sort((function(e,t){return(e.Order||0)-(t.Order||0)}));if(r){var c=a.find((function(e){return e.ID===r}));if(c)return c}return a[0]},Qs=function(e,t){return Xe()(e.values()).find((function(e){var n=e.Email;return t===Hs(n)}))||{}},Zs=function(e){return Object(Ei.j)(Object($.a)(e))},$s={},el=function(e){return $s[e.ContactID||""]&&$s[e.ContactID||""][Hs(e.Email)]},tl=function(e){return($s[e.ContactID||""]||{})[Hs(e.Email)]||{}},nl=function(e){return!e||e.Defaults},rl=function(e){return e.Flags&be.x.ENABLE_ENCRYPTION},al=function(){var e=tt()($e.a.mark((function e(t,n,r,a,c,o,i){var u,s,l,f,m,d,p,v,b,g,h,E;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n.RecipientType,s=n.Keys,l=void 0===s?[]:s,f=n.Warnings,m=void 0===f?[]:f,d=u===be.V.TYPE_INTERNAL,p=u===be.V.TYPE_EXTERNAL,v=o.PGPScheme,b=v===be.N.SEND_PGP_MIME?be.G.MIME:be.G.PLAINTEXT,g=Xs(i,t),h=Ws(g,l),!d&&!p||!l.length){e.next=19;break}return E=Gs(g,l),e.t0=m,e.t1=p?b:r,e.next=13,Object(Us.e)(l[0].PublicKey);case 13:return e.t2=e.sent,e.t3=!E,e.t4=d?be.N.SEND_PM:v,e.t5=h,e.t6=h,e.abrupt("return",{warnings:e.t0,encrypt:!0,sign:!0,mimetype:e.t1,publickeys:e.t2,primaryPinned:e.t3,scheme:e.t4,pinned:e.t5,ownAddress:e.t6,isVerified:!0});case 19:if(!a){e.next=21;break}return e.abrupt("return",{warnings:m,encrypt:!0,sign:!1,mimetype:r,publickeys:[],primaryPinned:!0,scheme:be.N.SEND_EO,pinned:!1,ownAddress:h,isVerified:!0});case 21:return e.abrupt("return",{warnings:m,encrypt:!1,sign:c,mimetype:c?b:r,publickeys:[],primaryPinned:!0,scheme:c?v:be.N.SEND_CLEAR,pinned:!1,ownAddress:h,isVerified:!0});case 22:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,o,i){return e.apply(this,arguments)}}(),cl=function(e,t,n,r,a){return n===be.N.SEND_PGP_MIME&&(r||a)?be.G.MIME:n===be.N.SEND_PGP_INLINE&&(r||a)?be.G.PLAINTEXT:n===be.N.SEND_EO?t:t===be.G.PLAINTEXT||null===e?t:e},ol=function(){var e=tt()($e.a.mark((function e(t,n,r,a){var c,o,i,u,s,l,f,m;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=3;break}return c=Xs(a,r),e.abrupt("return",!Gs(c,n));case 3:return o=n.filter(rl).map((function(e){return e.PublicKey})),e.next=6,Promise.all(o.map(Us.e));case 6:return i=e.sent,u=i.filter((function(e){var t=_()(e,1)[0];return!!(void 0!==t&&t)})),e.next=10,Object(Us.e)((d=t[0],Object($.b)(Object(Ei.g)(d))));case 10:return s=e.sent,l=_()(s,1),f=l[0],m=Object(Us.d)(f),e.abrupt("return",0===u.length||u.map((function(e){var t=_()(e,1)[0];return Object(Us.d)(t)})).includes(m));case 15:case"end":return e.stop()}var d}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),il=function(){var e=tt()($e.a.mark((function e(t,n,r,a,c,o,i,u){var s,l,f,m,d,p,v,b,g,h,E,O,j,x,y,w,N,k,A,C,D,S,L,I;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.encryptFlag,l=t.signFlag,f=t.mimetype,m=t.emailKeys,d=t.scheme,p=t.isVerified,v=n.RecipientType,b=n.Warnings,g=void 0===b?[]:b,h=n.Keys,E=void 0===h?[]:h,O=v===be.V.TYPE_INTERNAL,j=v===be.V.TYPE_EXTERNAL&&E.length>0,!O&&!j){e.next=10;break}return e.next=7,ol(m,E,o,u);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=!0;case 11:if(x=e.t0,!O&&!j){e.next=18;break}return e.next=15,Object(Us.e)(E[0].PublicKey);case 15:e.t1=e.sent,e.next=19;break;case 18:e.t1=[];case 19:return y=e.t1,e.next=22,Promise.all(m.map(Ei.g).map(Ei.d).map((function(e){return Object(Us.e)(e).then((function(e){var t=_()(e,1)[0];return Object(Us.f)(t).then((function(e){return e?null:[t]}))}))})));case 22:return w=e.sent,N=w.filter((function(e){return null!==e})),k=N.length&&x?N[0]:y,A=g,C=O||j||s&&!!N.length,D=(D=O||j||(null===l?!!c:l))||s,S=null===(S=O?be.N.SEND_PM:D||C?d:be.N.SEND_CLEAR)?i.PGPScheme:S,a&&!C&&(D=!1,C=!0,S=be.N.SEND_EO),L=cl(f,r,S,D,C),I=N.length>0,!1,e.abrupt("return",{publickeys:k,warnings:A,encrypt:C,sign:D,scheme:S,mimetype:L,primaryPinned:x,isVerified:p,pinned:I,ownAddress:!1});case 36:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,o,i,u){return e.apply(this,arguments)}}(),ul=function(){var e=tt()($e.a.mark((function e(t,n,r,a,c,o,i,u){var s,l,f;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Hs(t),l=Qs(u,s),!nl(l)){e.next=7;break}return e.next=5,al(t,n,r,a,c,o,i);case 5:return f=e.sent,e.abrupt("return",se()({},t,f));case 7:throw"Unsupported";case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,o,i,u){return e.apply(this,arguments)}}(),sl=function(){var e=tt()($e.a.mark((function e(t,n,r,a,c,o,i,u){var s,l;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Hs(t),l=Qs(u,s),!nl(l)){e.next=10;break}return e.t0=se.a,e.t1={},e.t2=t,e.next=8,al(t,n,r,a,c,o,i);case 8:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 10:if(el(l)){e.next=12;break}return e.abrupt("return",{});case 12:return e.t4=se.a,e.t5={},e.t6=t,e.next=17,il(tl(l),n,r,a,c,t,o,i);case 17:return e.t7=e.sent,e.abrupt("return",(0,e.t4)(e.t5,e.t6,e.t7));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,o,i,u){return e.apply(this,arguments)}}(),ll=function(e,t){return function(e){return e.every((function(e){return nl(e)||el(e)}))}(e.map(Hs).map((function(e){return Qs(t,e)})))},fl=function(){var e=tt()($e.a.mark((function e(t,n,r,a,c,o,i,u){var s,l;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Xs(i,t),!Ws(s,n.Keys)){e.next=6;break}return e.next=4,al(t,n,r,a,c,o,i);case 4:return l=e.sent,e.abrupt("return",se()({},t,l));case 6:if(!ll([t],u)){e.next=8;break}return e.abrupt("return",sl(t,n,r,a,c,o,i,u));case 8:return e.abrupt("return",ul(t,n,r,a,c,o,i,u));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,o,i,u){return e.apply(this,arguments)}}(),ml=function(){var e=tt()($e.a.mark((function e(){var t,n,r,a,c,o,i,u,s,l,f,m,d,p=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:[],n=p.length>1?p[1]:void 0,r=p.length>2?p[2]:void 0,a=p.length>3?p[3]:void 0,c=p.length>4?p[4]:void 0,o=p.length>5?p[5]:void 0,i=p.length>6&&void 0!==p[6]&&p[6],u=n?n.MIMEType:be.G.DEFAULT,s=dc(n),l=n?lc(n):r.Sign,f=Object(Cc.d)(t.map(Hs)),e.next=13,Promise.all(f.map(function(){var e=tt()($e.a.mark((function e(t){var n;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t);case 3:return n=e.sent,e.abrupt("return",fl(t,n,u,s,l,r,a,c));case 7:if(e.prev=7,e.t0=e.catch(0),i){e.next=11;break}throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 13:return m=e.sent,d=Object.assign.apply(Object,[{}].concat(Xe()(m))),e.abrupt("return",t.reduce((function(e,t){var n=d[Hs(t)];return n?(e[t]=n,e):e}),{}));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dl=function(e,t){var n=Du.a.factory({contentType:"text/html;charset=utf-8",contentTransferEncoding:"base64",body:e});t&&t.length>0&&console.log("attachments in mime message ignored as not supported yet",t);var r=[n];return Du.a.factory({contentType:"multipart/related",body:r})},pl=function(e){return Du.a.factory({body:e,contentTransferEncoding:"quoted-printable"})},vl=function(e,t,n){return void 0!==t&&void 0!==e?function(e,t,n){return Du.a.factory({contentType:"multipart/alternative",body:[pl(e),dl(t,n)]})}(e,t,n):void 0!==t?dl(t,n):pl(e)},bl=function(e,t,n){var r=vl(e,t,n);n&&n.length>0&&console.log("attachments in mime message ignored as not supported yet",n);var a=[r];return Du.a.factory({contentType:"multipart/mixed",body:a}).toString()+"\r\n"},gl=function(){var e=tt()($e.a.mark((function e(t){var n,r,a,c=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>1&&void 0!==c[1])||c[1],r=kc(t,n),a=wc(t),e.abrupt("return",bl(r,a,[]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hl=be.G.PLAINTEXT,El=be.G.DEFAULT,Ol=be.G.MIME,jl=function(){var e=tt()($e.a.mark((function e(t){var n;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=pc(null===(n=t.data)||void 0===n?void 0:n.Flags),e.t1={},e.t2=Ol,e.next=5,gl(t);case 5:return e.t3=e.sent,e.abrupt("return",{Flags:e.t0,Addresses:e.t1,MIMEType:e.t2,Body:e.t3});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xl=function(){var e=tt()($e.a.mark((function e(t){var n;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{Flags:pc(null===(n=t.data)||void 0===n?void 0:n.Flags),Addresses:{},MIMEType:hl,Body:kc(t,!0)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yl=function(){var e=tt()($e.a.mark((function e(t){var n;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{Flags:pc(null===(n=t.data)||void 0===n?void 0:n.Flags),Addresses:{},MIMEType:El,Body:wc(t)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wl=function(){var e=tt()($e.a.mark((function e(t,n){var r,a,c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.values(n).reduce((function(e,t){var n;return n={},se()(n,hl,e[hl]||t.mimetype===be.G.PLAINTEXT),se()(n,El,e[El]||t.mimetype===El||t.scheme===be.N.SEND_PGP_MIME&&!t.encrypt&&!t.sign),se()(n,Ol,e[Ol]||t.scheme===be.N.SEND_PGP_MIME&&(t.encrypt||t.sign)),n}),(r={},se()(r,hl,!1),se()(r,El,!1),se()(r,Ol,!1),r)),c=Object.values(be.G).filter((function(e){return a[e]})),o={},e.next=5,Promise.all(c.map(function(){var e=tt()($e.a.mark((function e(n){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===Ol?3:e.t0===hl?7:e.t0===El?11:15;break;case 3:return e.next=5,jl(t);case 5:return o[Ol]=e.sent,e.abrupt("return");case 7:return e.next=9,xl(t);case 9:return o[hl]=e.sent,e.abrupt("return");case 11:return e.next=13,yl(t);case 13:return o[El]=e.sent,e.abrupt("return");case 15:throw new Error;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nl=be.G.PLAINTEXT,kl=be.G.DEFAULT,Al=be.G.MIME,Cl=be.N.SEND_PM,Dl=be.N.SEND_CLEAR,Sl=be.N.SEND_PGP_INLINE,Ll=be.N.SEND_PGP_MIME,Il=be.N.SEND_EO,Tl=function(){var e=tt()($e.a.mark((function e(t){var n,r,a=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publickeys,r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",{Type:Cl,PublicKey:n.length?n[0]:void 0,Signature:jc(r).every((function(e){return e.Signature}))});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pl=function(){var e=tt()($e.a.mark((function e(){var t,n=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},console.warn("Unsuported yet",t),e.abrupt("return",{});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rl=function(){var e=tt()($e.a.mark((function e(t){var n,r;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.publickeys,r=t.sign,!t.encrypt){e.next=3;break}return e.abrupt("return",{Type:Ll,PublicKey:n.length?n[0]:void 0});case 3:return e.abrupt("return",{Type:32,Signature:+r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ml=function(){var e=tt()($e.a.mark((function e(t){var n,r,a,c,o=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.publickeys,r=t.sign,a=t.encrypt,c=o.length>1&&void 0!==o[1]?o[1]:{},!a){e.next=4;break}return e.abrupt("return",{Type:Sl,PublicKey:n.length?n[0]:void 0,Signature:jc(c).every((function(e){return e.Signature}))});case 4:return e.abrupt("return",{Type:Dl,Signature:+r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bl=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{Type:Dl,Signature:0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fl=function(){var e=tt()($e.a.mark((function e(t,n,r,a){var c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){var e=tt()($e.a.mark((function e(n,r,a){var c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:c=e.sent,(o=t[a]).Addresses||(o.Addresses={}),o.Type||(o.Type=0),o.Addresses[r]=c,o.Type|=c.Type||0;case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),o=r.map((function(e){var t,r=a[e],o="text/html"===(null===r.mimetype?null===(t=n.data)||void 0===t?void 0:t.MIMEType:r.mimetype)?kl:Nl;switch(r.scheme){case Cl:return c(Tl(r,n.data),e,o);case Ll:return r.sign||r.encrypt?c(Rl(r),e,Al):c(Bl(),e,kl);case Sl:return c(Ml(r,n.data),e,Nl);case Il:case Dl:return dc(n.data)?c(Pl(n.data),e,o):c(Bl(),e,o)}})),e.next=4,Promise.all(o);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),zl=n("9sRk"),Ul=n("Kv4S"),_l=be.N.SEND_CLEAR,Kl=be.N.SEND_EO,Hl=function(){var e=tt()($e.a.mark((function e(t){var n,r,a,c,o,i;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sessionKeys,r=void 0===n?[]:n,a=t.publicKeys,c=void 0===a?[]:a,o=t.passwords,i=void 0===o?[]:o,e.abrupt("return",Promise.all(r.map(function(){var e=tt()($e.a.mark((function e(t){var n,r,a;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(zl.a)({data:t.data,algorithm:t.algorithm,publicKeys:c.length>0?c:void 0,passwords:i});case 2:return n=e.sent,r=n.message,a=r.packets.write(),e.abrupt("return",Zs(a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vl=function(e,t,n){console.log("encryptAttachmentKeys not implemented yet",e,t,n)},Xl=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="aes256",e.next=3,Object(Us.c)("aes256");case 3:return e.t1=e.sent,e.abrupt("return",{algorithm:e.t0,data:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gl=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c,o,i,u,s,l,f,m;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(xs.i)(n),c=a.privateKeys,o=r.filter(Ta.b),e.t0=Ul.a,e.t1=t.Body,e.t2=o,!o.length){e.next=9;break}e.t3=void 0,e.next=12;break;case 9:return e.next=11,Xl();case 11:e.t3=e.sent;case 12:return e.t4=e.t3,e.t5=c,e.t6={data:e.t1,publicKeys:e.t2,sessionKey:e.t4,privateKeys:e.t5,returnSessionKey:!0,compression:!0},e.next=17,(0,e.t0)(e.t6);case 17:return i=e.sent,u=i.data,s=i.sessionKey,e.next=22,Object(hi.i)(u);case 22:return l=e.sent,f=l.asymmetric,m=l.encrypted,e.abrupt("return",{keys:f,encrypted:m,sessionKey:s});case 26:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Wl=function(){var e=tt()($e.a.mark((function e(t,n,r,a){var c,o,i,u,s,l,f,m,d,p,v;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(xs.i)(n),o=c.privateKeys,i=c.publicKeys,u=[].concat(Xe()(i),Xe()(r)).filter(Ta.b),e.next=4,Object(Ul.a)({data:t.Body,publicKeys:u,privateKeys:o,returnSessionKey:!0,compression:!0});case 4:return s=e.sent,l=s.data,f=s.sessionKey,e.next=9,Object(hi.i)(l);case 9:return m=e.sent,d=m.asymmetric,p=m.encrypted,m.asymmetric=m.asymmetric.slice(0,i.length),v=Object(Ei.e)(Object.values(m).flat()),e.next=15,Object(hi.a)(v);case 15:return a.data.Body=e.sent,e.abrupt("return",{keys:d.slice(i.length),encrypted:p,sessionKey:f});case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Yl=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c,o,i,u,s,l,f,m,d;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object.keys(t.Addresses||{}),o=Object.values(t.Addresses||{}),i=o.map((function(e){return e.PublicKey})),u=(null===(a=r.data)||void 0===a?void 0:a.MIMEType)===t.MIMEType?Wl:Gl,e.next=6,u(t,n,i,r);case 6:return s=e.sent,l=s.keys,f=s.encrypted,m=s.sessionKey,d=0,i.forEach((function(e,n){if(e){var r=l[d++];(t.Addresses||{})[c[n]].BodyKeyPacket=Zs(r)}})),e.next=14,Promise.all(o.map(function(){var e=tt()($e.a.mark((function e(t){var n,a,c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Type===Kl){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Hl({sessionKeys:[m],passwords:[(null===(n=r.data)||void 0===n?void 0:n.Password)||""]});case 4:a=e.sent,c=_()(a,1),o=c[0],t.BodyKeyPacket=o;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:(t.Type||0)&(32|_l)&&(t.BodyKey=(v=void 0,b=void 0,g=void 0,v=(p=m).data,b=p.algorithm,g=void 0===b?"aes256":b,{Key:Zs(v),Algorithm:g})),t.Body=Zs(f[0]);case 16:case"end":return e.stop()}var p,v,b,g}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ql=function(){var e=tt()($e.a.mark((function e(t,n,r,a){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Yl(t,r,n),Vl(t,n,a)]);case 2:return Object.values(t.Addresses||{}).forEach((function(e){return delete e.PublicKey})),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Jl=function(){var e=tt()($e.a.mark((function e(t){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(jc(t.data).map((function(e){return wi(t,e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ql=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c,o,i;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jl(t);case 2:return c=e.sent,e.next=5,r(null===(a=t.data)||void 0===a?void 0:a.AddressID);case 5:return o=e.sent,i=Object.values(n),e.next=9,Promise.all(i.map((function(e){return ql(e,t,o,c)})));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Zl=function(){var e=Object(K.a)(),t=_()(e,1)[0],n=Object(zs.a)(),r=_()(n,1)[0],a=new Map,c=Object(Os.a)(),i=Object(js.a)(),u=Object(fn.a)();return Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(n){var o,s,l,f,m,d,p;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=hc(n.data),l=Object(Cc.d)(s),e.next=4,ml(l,n.data||{},t,r,a,c);case 4:return f=e.sent,console.log("sendPrefs",f),e.next=8,wl(n,f);case 8:return m=e.sent,e.next=11,Fl(m,n,s,f);case 11:return m=e.sent,e.next=14,Ql(n,m,i);case 14:return m=e.sent,console.log("packages",m),e.next=18,u(Object(dn.j)(null===(o=n.data)||void 0===o?void 0:o.ID,{Packages:m}));case 18:return d=e.sent,p=d.Sent,console.log("Sent",p),e.abrupt("return",{data:p});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,r,a,c])};function $l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tf=function(){var e=tt()($e.a.mark((function e(t,n,r){var a,c;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.a)({data:t.content,publicKeys:r,privateKeys:n,format:"utf8",compression:!0});case 2:return a=e.sent,c=a.data,e.abrupt("return",ef({},t,{data:ef({},t.data,{Body:c})}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),nf=function(){var e=Object(Os.a)(),t=Object(js.a)();return Object(o.useCallback)(function(){var n=tt()($e.a.mark((function n(r){var a,c,o,i,u,s,l,f,m,d;return $e.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([e(null===(a=r.data)||void 0===a?void 0:null===(c=a.Sender)||void 0===c?void 0:c.Address),t(null===(o=r.data)||void 0===o?void 0:o.AddressID)]);case 2:return i=n.sent,u=_()(i,2),s=u[0].publicKeys,l=void 0===s?[]:s,f=u[1],m=Object(xs.i)(f),d=m.privateKeys,n.abrupt("return",tf(r,d,l));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t])};function rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cf=function(e,t){return e.document&&(e.document.innerHTML=t.content||""),af({},e,{content:t.content,data:af({},e.data,{},t.data)})},of=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(fn.a)(),r=Object(H.a)(),a=r.call,c=Object(o.useContext)(Bs),i=Object(o.useMemo)((function(){return new Map}),[]),u=Ri(),s=Object(o.useState)(e.ID||""),l=_()(s,2),f=l[0],m=l[1],d=Object(o.useState)(c.has(f)?c.get(f):{data:e}),p=_()(d,2),v=p[0],b=p[1],g=Ls(),h=nf(),E=Zl();Object(o.useEffect)((function(){e.ID&&e.ID!==f&&m(e.ID)}),[e]),Object(o.useEffect)((function(){return c.has(f)?b(c.get(f)):b({data:e}),c.subscribe((function(e){e===f&&c.has(f)&&b(c.get(f))}))}),[f,c]);var O=[Ou,Es,Au,es,ts,cs,os,gs],j=Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(t){var r,a,c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,(a=void 0===r?{}:r).Body){e.next=7;break}return e.next=4,n(Object(dn.d)(a.ID));case 4:return c=e.sent,o=c.Message,e.abrupt("return",{data:o});case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),x=Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(t){var r,c,o;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,c=void 0===r?{}:r,o=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Object(dn.f)([c.ID||""]));case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!c.Unread){e.next=5;break}return o(),e.abrupt("return",{data:af({},c,{Unread:0})});case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),y=Object(o.useCallback)(tt()($e.a.mark((function e(){var t,r,c,o=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,n(Object(dn.a)({Action:t.action!==pt.NEW?t.action:void 0,Message:t.data}));case 3:return r=e.sent,c=r.Message,a(),e.abrupt("return",{data:c});case 7:case"end":return e.stop()}}),e)}))),[n]),w=Object(o.useCallback)(tt()($e.a.mark((function e(){var t,r,c,o,i=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,n(Object(dn.l)(null===(t=r.data)||void 0===t?void 0:t.ID,r.data));case 3:return c=e.sent,o=c.Message,a(),e.abrupt("return",{data:o});case 7:case"end":return e.stop()}}),e)}))),[n]),N=Object(o.useCallback)(tt()($e.a.mark((function e(){var t,r,c=arguments;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,n(Object(dn.b)([null===(t=r.data)||void 0===t?void 0:t.ID]));case 3:return a(),e.abrupt("return",{});case 5:case"end":return e.stop()}}),e)}))),[n]),k=Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(r,a){var c;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(r,{cache:i,mailSettings:t,api:n,attachmentsCache:u});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return(c=e.t0).document&&(c.content=c.document.innerHTML),e.abrupt("return",af({},r,{},c));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]),A=Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(t,n){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.reduce(function(){var e=tt()($e.a.mark((function e(t,n){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,t;case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve(t)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[k,c]),C=Object(o.useCallback)(tt()($e.a.mark((function e(){var t;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.set(f,af({},v,{initialized:!1})),e.next=3,A(v,[j,g,x].concat(O));case 3:t=e.sent,c.set(f,af({},t,{initialized:!0}));case 5:case"end":return e.stop()}}),e)}))),[f,v,A,c]),D=Object(o.useCallback)(tt()($e.a.mark((function e(){var t;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(af({},v,{showRemoteImages:!0}),[gs]);case 2:t=e.sent,c.set(f,t);case 4:case"end":return e.stop()}}),e)}))),[f,v,v,A,c]),S=Object(o.useCallback)(tt()($e.a.mark((function e(){var t;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(af({},v,{showEmbeddedImages:!0}),[es]);case 2:t=e.sent,c.set(f,t);case 4:case"end":return e.stop()}}),e)}))),[f,v,A,c]),L=Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(t){var n,r,a;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,[h,y]);case 2:a=e.sent,c.set((null===(n=a.data)||void 0===n?void 0:n.ID)||"",a),m((null===(r=a.data)||void 0===r?void 0:r.ID)||"");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,A,c]),I=Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(t){var n,r;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cf(v,t),e.next=3,A(n,[h,w]);case 3:return r=e.sent,c.set(f,r),e.next=7,Object(Vi.b)(0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,A,c]),T=Object(o.useCallback)(function(){var e=tt()($e.a.mark((function e(t){var n,r;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cf(v,t),e.next=3,A(n,[h,w,E]);case 3:return r=e.sent,c.set(f,r),e.next=7,Object(Vi.b)(0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,A,c]),P=Object(o.useCallback)(tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(v,[N]);case 2:return c.delete(f),e.next=5,Object(Vi.b)(0);case 5:case"end":return e.stop()}}),e)}))),[v,A,c]);return[v,{initialize:C,loadRemoteImages:D,loadEmbeddedImages:S,createDraft:L,saveDraft:I,send:T,deleteDraft:P}]},uf=function(e){var t=e.labels,n=void 0===t?[]:t,r=e.message,a=e.mailSettings,c=e.initialExpand,u=void 0===c||c,s=e.conversationIndex,l=void 0===s?0:s,f=e.onCompose,m=Object(ho.a)(u),d=m.state,p=m.set,v=Object(o.useRef)(null),b=of(r,a),g=_()(b,2),h=g[0],E=g[1],O=E.initialize,j=E.loadRemoteImages,x=E.loadEmbeddedImages,y=!!(null==h?void 0:h.initialized),w=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(null==h?void 0:h.initialized)){e.next=3;break}return e.next=3,O();case 3:0!==l&&u&&v.current&&v.current.scrollIntoView({behavior:"smooth",block:"start"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){!y&&d&&w(),y&&d&&oc(h.data)&&f({existingDraft:h})}),[y,d]);var N=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){return function(){p(e)}};return i.a.createElement("article",{ref:v,className:Object(on.a)(["message-container mb2",d&&"is-opened"])},d?i.a.createElement(i.a.Fragment,null,i.a.createElement(di,{message:h,messageLoaded:y,onLoadRemoteImages:N,onLoadEmbeddedImages:k,labels:n,mailSettings:a,onCollapse:A(!1),onCompose:f}),y?i.a.createElement(i.a.Fragment,null,i.a.createElement(Eo,{message:h}),xc(h.data)?i.a.createElement(Hi,{message:h}):null):i.a.createElement(X.a,null)):i.a.createElement(Ho,{message:h,labels:n,onExpand:A(!0)}))},sf=n("F/2c"),lf=function(e){for(var t=e.length,n=!1;--t>0;)if(0===e[t-1].Unread){n=!0;break}var r=n?t:0;return e.length?e[r]:e[0]},ff=function(e){return 0===e.length?{}:e[e.length-1]};function mf(){var e=W()(["Hide trashed messages"]);return mf=function(){return e},e}function df(){var e=W()(["Show trashed messages"]);return df=function(){return e},e}function pf(){var e=W()(["Hide non-trashed messages"]);return pf=function(){return e},e}function vf(){var e=W()(["Show non-trashed messages"]);return vf=function(){return e},e}function bf(){var e=W()(["This conversation contains trashed messages."]);return bf=function(){return e},e}function gf(){var e=W()(["This conversation contains non-trashed messages."]);return gf=function(){return e},e}var hf=function(e){var t=e.inTrash,n=e.filter,r=e.onToggle;return i.a.createElement("div",{className:"containsMessage flex flex-column"},i.a.createElement("p",{className:"bordered-container flex pt0-5 pb0-5 pl1 pr1"},t?Object(Y.c)("Info").t(gf()):Object(Y.c)("Info").t(bf()),i.a.createElement("a",{onClick:r,className:"ml0-5"},t?n?Object(Y.c)("Action").t(vf()):Object(Y.c)("Action").t(pf()):n?Object(Y.c)("Action").t(df()):Object(Y.c)("Action").t(mf()))))},Ef=function(e){var t=e.labelID,n=e.conversationID,r=e.mailSettings,a=e.onCompose,c=Object(le.a)(),u=_()(c,1)[0],s=function(e){var t=Object(o.useContext)(Bs),n=Object(fn.a)(),r=Object(o.useCallback)((function(){return n(Object(mn.b)(e))}),[e,n,t]);return Object(sf.a)(t,"Conversation-".concat(e),r)}(n),l=_()(s,2),f=l[0],m=l[1],d=Object(ho.a)(!0),p=d.state,v=d.toggle;if(m)return i.a.createElement(X.a,null);var b=f.Conversation,g=f.Messages,h=void 0===g?[]:g;if(!b)return null;var E=t===be.B.TRASH,O=h.filter((function(e){return E===Ht(e,be.B.TRASH)})),j=p?O:h,x=O.length!==h.length,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e===be.B.STARRED||ln(e))return lf(t.filter((function(t){return Ht(t,e)&&!oc(t)})));if(e===be.B.DRAFTS||e===be.B.ALL_DRAFTS)return ff(t.filter(oc));var n=t.filter((function(e){return!oc(e)&&!yc(e)})),r=ff(n);return r&&0===r.Unread?r:lf(n)}(t,j).ID;return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",{className:"flex flex-column mb1"},i.a.createElement("div",{className:"flex flex-nowrap flex-spacebetween flex-items-center mb1"},i.a.createElement("h2",{className:"mb0"},i.a.createElement(Zc,{className:"mr0-25",conversation:b}),b.Subject),i.a.createElement("div",null,i.a.createElement(Sc,{labels:u,max:4,element:b}),i.a.createElement(Ac,{element:b,type:bt}))),x&&i.a.createElement(hf,{inTrash:E,filter:p,onToggle:v})),j.map((function(e,t){return i.a.createElement(uf,{key:e.ID,message:e,initialExpand:e.ID===y,labels:u,mailSettings:r,conversationIndex:t,onCompose:a})})))},Of=n("rbcQ"),jf=n("12eg"),xf=n("Qfbx");function yf(){var e=W()(["Upgrade to a paid plan starting from $4/month only and get additional storage capacity and more addresses with ProtonMail Plus."]);return yf=function(){return e},e}function wf(){var e=W()(["Welcome"]);return wf=function(){return e},e}function Nf(){var e=W()(["Having trouble sending or receiving emails? Interested in helping us improve our service? Feel free to ","."]);return Nf=function(){return e},e}function kf(){var e=W()(["You have "," in this folder"]);return kf=function(){return e},e}function Af(){var e=W()(["Welcome"]);return Af=function(){return e},e}function Cf(){var e=W()(["Welcome, ","!"]);return Cf=function(){return e},e}function Df(){var e=W()(["report a bug"]);return Df=function(){return e},e}function Sf(){var e=W()([""," unread email"]);return Sf=function(){return e},e}var Lf=function(e){var t=e.labelCount,n=Object(ee.b)(),r=_()(n,1)[0],a=Object(cr.a)().createModal,c=t.Unread||0,o=i.a.createElement("strong",{key:"unreads-label"},Object(Y.ngettext)(Object(Y.msgid)(Sf(),c),"".concat(c," unread emails"),c)),u=i.a.createElement(Of.a,{key:"report-bug-btn",onClick:function(){return a(i.a.createElement(jf.a,null))}},Object(Y.c)("Action").t(Df()));return i.a.createElement("div",{className:"flex-item-fluid aligncenter p3"},i.a.createElement("h1",null,r.DisplayName?Object(Y.c)("Title").t(Cf(),Object($.c)(r.DisplayName)):Object(Y.c)("Title").t(Af())),c?i.a.createElement("p",null,Object(Y.c)("Info").jt(kf(),o)):null,r.hasPaidMail?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"mw40e center mb2"},Object(Y.c)("Info").jt(Nf(),u)),i.a.createElement("img",{src:xf.a,alt:Object(Y.c)("Alternative text for welcome image").t(wf())})):i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,Object(Y.c)("Info").t(yf()))))},If=n("e2Bf"),Tf=n("wmGu"),Pf=n("jymj");function Rf(){var e=W()(["Deselect"]);return Rf=function(){return e},e}function Mf(){var e=W()(["Conversation"]);return Mf=function(){return e},e}function Bf(){var e=W()(["You selected "," element from this folder"]);return Bf=function(){return e},e}function Ff(){var e=W()(["You have "," stored in this folder"]);return Ff=function(){return e},e}var zf=function(e){var t=e.labelCount,n=e.checkedIDs,r=void 0===n?[]:n,a=e.onUncheckAll,c=Object(le.a)(),u=_()(c,1)[0],s=t.Total||0,l=r.length,f=Object(o.useMemo)((function(){return sn(t.LabelID||"",u)}),[u,t]);return i.a.createElement("div",{className:"flex-item-fluid aligncenter p3"},0===l&&f&&i.a.createElement("h3",{className:"bold"},f),i.a.createElement("p",{className:"mb2"},0===l?Object(Y.ngettext)(Object(Y.msgid)(Ff(),s),"You have ".concat(s," stored in this folder"),s):Object(Y.ngettext)(Object(Y.msgid)(Bf(),l),"You selected ".concat(l," elements from this folder"),l)),i.a.createElement("div",{className:"mb2"},i.a.createElement("img",{src:l>1?Pf.a:Tf.a,alt:Object(Y.c)("Alternative text for conversation image").t(Mf())})),l>0&&i.a.createElement(If.a,{onClick:a},Object(Y.c)("Action").t(Rf())))},Uf=function(e){var t=e.labelID,n=void 0===t?"":t,r=e.checkedIDs,a=void 0===r?[]:r,c=e.onUncheckAll,u=e.welcomeRef,s=e.mailSettings,l=Object(Ge.a)(),f=_()(l,1)[0],m=Object(We.a)(),d=_()(m,1)[0],p=Ut({mailSettings:s,labelID:n});Object(o.useEffect)((function(){return function(){u.current=!0}}),[]);var v=Object(o.useMemo)((function(){var e=p===bt?f:d;return Array.isArray(e)?e.find((function(e){return e.LabelID===n}))||{LabelID:"",Unread:0,Total:0}:0}),[f,d]);return u.current||a.length>0?i.a.createElement(zf,{labelCount:v,checkedIDs:a,onUncheckAll:c}):i.a.createElement(Lf,{labelCount:v})},_f=function(e){var t,n=e.messageID,r=e.mailSettings,a=e.onCompose,c=Object(le.a)(),o=_()(c,1)[0],u=of({ID:n},r),s=_()(u,1)[0];return s.data?i.a.createElement(i.a.Fragment,null,i.a.createElement("header",{className:"flex flex-nowrap flex-spacebetween flex-items-center mb1"},i.a.createElement("h2",{className:"mb0"},null===(t=s.data)||void 0===t?void 0:t.Subject),i.a.createElement("div",null,i.a.createElement(Sc,{labels:o,max:4,element:s.data}),i.a.createElement(Ac,{element:s.data,type:vt}))),i.a.createElement(uf,{message:s.data,initialExpand:!0,labels:o,mailSettings:r,onCompose:a})):null};n("36vJ");function Kf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kf(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vf=function(e){var t=e.labelID,n=e.mailSettings,r=e.elementID,a=e.location,c=e.history,u=e.onCompose,s=Ft(n),l=zt(t,n),f=Object(o.useState)({page:Nn(a),total:0,size:50,limit:50}),m=_()(f,2),d=m[0],p=m[1],v=En(a),b=Object(o.useMemo)((function(){return function(e){return function(e){switch(e){case"-size":return{sort:"Size",desc:!0};case"size":return{sort:"Size",desc:!1};case"date":return{sort:"Time",desc:!1};default:return{sort:"Time",desc:!0}}}(En(e).sort)}(a)}),[v.sort]),g=Object(o.useMemo)((function(){return function(e){return function(e){switch(e){case"read":return{Unread:0};case"unread":return{Unread:1};default:return{}}}(En(e).filter)}(a)}),[v.filter]),h=Object(o.useState)(Object.create(null)),E=_()(h,2),O=E[0],j=E[1],x=Object(o.useState)(!1),y=_()(x,2),w=y[0],N=y[1],k=Object(o.useRef)(!1),A=hn({conversationMode:l,labelID:t,page:d,sort:b,filter:g}),C=_()(A,4),D=C[0],S=C[1],L=C[2],I=C[3];Object(o.useEffect)((function(){return p(Hf({},d,{page:Nn(a)}))}),[v.page]),Object(o.useEffect)((function(){return p(Hf({},d,{total:I}))}),[I]),function(e){var t=Object(K.a)(),n=_()(t,2),r=n[0],a=n[1],c=Object(le.a)(),i=_()(c,2),u=i[0],s=i[1],l=Object(ee.b)(),f=_()(l,2),m=f[0],d=f[1],p=Object(Ge.a)(),v=_()(p,2),b=v[0],g=v[1],h=Object(We.a)(),E=_()(h,2),O=E[0],j=[a,s,d,g,E[1]];Object(o.useEffect)((function(){if(j.every((function(e){return!e}))){var t=zt(e,r)?b:O,n=(Object(Je.a)(t,"LabelID")[e]||{}).Unread||0,a=n>0?"(".concat(n,") "):"",c=sn(e,u),o=m.Email;document.title="".concat(a).concat(c," | ").concat(o," | ProtonMail")}}),[e].concat(j))}(D);var T=Object(o.useMemo)((function(){return Object.entries(O).reduce((function(e,t){var n=_()(t,2),r=n[0];return n[1]?(e.push(r),e):e}),[])}),[O]),P=Object(o.useMemo)((function(){if(!(T.length>0))return r}),[r,T]),R=Object(o.useMemo)((function(){return T.length?T:P?[P]:[]}),[T,P]),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.reduce((function(e,n){return e[n]=t,e}),Object.create(null));j(Hf({},O,{},n)),N(t&&e.length===S.length)},B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return M(S.map((function(e){var t=e.ID;return void 0===t?"":t})),e)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Da,{labelID:D,elementID:P,selectedIDs:R,mailSettings:n,checkAll:w,onCheckAll:B,page:d,onPage:function(e){return c.push(function(e,t){return On(e,{page:0===t?void 0:String(t+1)})}(a,e))},sort:b,onSort:function(e){return c.push(function(e,t){return On(e,{sort:yn(t)})}(a,e))},filter:g,onFilter:function(e){return c.push(function(e,t){return On(e,{filter:wn(t)})}(a,e))},onBack:function(){return c.push(xn(a,D))}}),i.a.createElement("div",{className:Object(on.a)(["main-area--withToolbar flex-item-fluid flex reset4print",!s&&"main-area--rowMode"])},(s||!P)&&i.a.createElement("div",{className:"items-column-list scroll-if-needed scroll-smooth-touch"},L?i.a.createElement("div",{className:"flex flex-justify-center h100"},i.a.createElement(X.a,null)):i.a.createElement(go,{labelID:D,mailSettings:n,elementID:P,elements:S,checkedIDs:T,onCheck:M,onClick:function(e){return c.push(xn(a,D,e.ID))}})),(s||P)&&i.a.createElement("section",{className:"view-column-detail p2 flex-item-fluid scroll-if-needed"},P?l?i.a.createElement(Ef,{labelID:D,mailSettings:n,conversationID:P,onCompose:u}):i.a.createElement(_f,{mailSettings:n,messageID:P,onCompose:u}):i.a.createElement(Uf,{labelID:D,mailSettings:n,welcomeRef:k,checkedIDs:T,onUncheckAll:function(){return B(!1)}}))))},Xf=function(e){var t=e.match,n=e.location,r=e.history,a=e.onCompose,c=Object(K.a)(),u=_()(c,2),s=u[0],l=u[1],f=Object(H.a)().subscribe,m=(t||{}).params||{},d=m.elementID,p=m.labelID,v=void 0===p?"":p,b=ht[v]||v;return Object(o.useLayoutEffect)((function(){return f((function(e){var t=e.Messages;(null==t?void 0:t.find((function(e){var t=e.ID;return e.Action===be.s.DELETE&&t===d})))&&r.push(xn(n,b))}))}),[d]),i.a.createElement(cn,{labelID:b,location:n,history:r,onCompose:a},i.a.createElement(V.a,null,l?i.a.createElement(X.a,null):i.a.createElement(Vf,{labelID:b,mailSettings:s,elementID:d,location:n,history:r,onCompose:a})))},Gf=n("6WaT");function Wf(){var e=W()(["New message"]);return Wf=function(){return e},e}var Yf=function(e){var t=e.onClick,n=e.iconName,r=e.className,a=void 0===r?"":r;return i.a.createElement(If.a,{className:Object(on.a)(["composer-title-bar-button",a]),onClick:t},i.a.createElement(me.a,{className:"mauto",name:n,color:"currentColor"}))},qf=function(e){var t,n=e.message,r=void 0===n?{}:n,a=e.minimized,c=e.maximized,o=e.toggleMinimized,u=e.toggleMaximized,s=e.onClose,l=(null===(t=r.data)||void 0===t?void 0:t.Subject)||Object(Y.c)("Title").t(Wf());return i.a.createElement("header",{className:"composer-title-bar flex flex-row"},i.a.createElement("span",{className:"flex-self-vcenter flex-item-fluid pl0-5 pr1 ellipsis"},l),i.a.createElement(Yf,{iconName:"minimize",className:Object(on.a)([a&&"rotateX-180"]),onClick:o}),i.a.createElement(Yf,{iconName:c?"contract-window":"expand",onClick:u}),i.a.createElement(Yf,{iconName:"close",onClick:s}))},Jf=n("rN/M"),Qf=function(e){var t=e.recipient,n=e.onChange,r=e.onRemove,a=Object(o.useState)(qs(t)),c=_()(a,2),u=c[0],s=c[1],l=Object(o.useRef)(null),f=function(){var e=Ys(u);return Ks(e.Address)},m=Object(o.useState)(f()),d=_()(m,2),p=d[0],v=d[1];Object(o.useEffect)((function(){var e=qs(t);l.current&&(l.current.textContent=e),s(e)}),[t]);var b=function(e){s(e.target.textContent||"")};return i.a.createElement("div",{className:Object(on.a)(["composer-addresses-item bordered-container flex flex-items-center flex-nowrap flex-row mw80 stop-propagation",!p&&"invalid"])},i.a.createElement("span",{className:"composer-addresses-item-label mtauto mbauto pl0-5 ellipsis pr0-5",contentEditable:!0,onKeyUp:b,onPaste:b,onBlur:function(){v(f()),n(Ys(u))},ref:l}),i.a.createElement("button",{className:"composer-addresses-item-remove inline-flex pl0-5 pr0-5 no-pointer-events-children h100",onClick:r},i.a.createElement(me.a,{name:"off",size:12,className:"mauto"})))},Zf=function(e){var t=e.id,n=e.addresses,r=void 0===n?[]:n,a=e.onChange,c=e.addressesFocusRef,u=Object(o.useState)(""),s=_()(u,2),l=s[0],f=s[1],m=Object(o.useRef)();Object(o.useEffect)((function(){var e;c&&(c.current=(null===(e=m.current)||void 0===e?void 0:e.focus.bind(m.current))||Ta.c)}),[]);return i.a.createElement("div",{className:"composer-addresses-container flex-item-fluid bordered-container pl1-25",onClick:function(e){var t;e.target.closest(".stop-propagation")?e.stopPropagation():null===(t=m.current)||void 0===t||t.focus()}},r.map((function(e,t){return i.a.createElement(Qf,{key:t,recipient:e,onChange:(c=e,function(e){console.log("handleExistingChange",c,e),a(r.map((function(t){return t===c?e:t})))}),onRemove:(n=e,function(){a(r.filter((function(e){return e!==n})))})});var n,c})),i.a.createElement("div",null,i.a.createElement(Jf.a,{id:t,value:l,onChange:function(e){var t=e.target;f(t.value)},onKeyDown:function(e){13!==e.keyCode&&9!==e.keyCode||(a([].concat(Xe()(r),[Ys(l)])),f(""),e.preventDefault())},ref:m})))};function $f(){var e=W()(["BCC"]);return $f=function(){return e},e}function em(){var e=W()(["CC"]);return em=function(){return e},e}function tm(){var e=W()(["To"]);return tm=function(){return e},e}function nm(){var e=W()(["Add contacts"]);return nm=function(){return e},e}var rm=function(e){var t,n,r,a=e.message,c=e.onChange,u=e.expanded,s=e.toggleExpanded,l=e.addressesFocusRef,f=Object(o.useState)(Object(on.b)("composer")),m=_()(f,1)[0],d=function(e){return function(t){c({data:se()({},e,t)})}},p=function(e){return function(){console.log("Open contact modal for",e)}};return i.a.createElement("div",{className:"flex flex-row flex-nowrap flex-items-start pl0-5 mb0-5"},i.a.createElement("div",{className:"flex flex-column flex-items-start flex-item-fluid"},i.a.createElement("div",{className:"flex flex-row w100"},i.a.createElement(de.a,{htmlFor:"to-".concat(m),className:"composer-meta-label"},i.a.createElement($r.a,{title:Object(Y.c)("Title").t(nm())},i.a.createElement("a",{onClick:p("ToList")},Object(Y.c)("Title").t(tm())))),i.a.createElement(Zf,{id:"to-".concat(m),addresses:null===(t=a.data)||void 0===t?void 0:t.ToList,onChange:d("ToList"),addressesFocusRef:l})),u&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"flex flex-row w100 mt0-5"},i.a.createElement(de.a,{htmlFor:"cc-".concat(m),className:"composer-meta-label"},i.a.createElement("a",{onClick:p("CCList")},Object(Y.c)("Title").t(em()))),i.a.createElement(Zf,{id:"cc-".concat(m),addresses:null===(n=a.data)||void 0===n?void 0:n.CCList,onChange:d("CCList")})),i.a.createElement("div",{className:"flex flex-row w100 mt0-5"},i.a.createElement(de.a,{htmlFor:"bcc-".concat(m),className:"composer-meta-label"},i.a.createElement("a",{onClick:p("BCCList")},Object(Y.c)("Title").t($f()))),i.a.createElement(Zf,{id:"bcc-".concat(m),addresses:null===(r=a.data)||void 0===r?void 0:r.BCCList,onChange:d("BCCList")})))),i.a.createElement(If.a,{icon:"caret",className:"pm-button--link ml0-5 mr0-5",onClick:s}))};function am(){var e=W()(["BCC"]);return am=function(){return e},e}function cm(){var e=W()(["CC"]);return cm=function(){return e},e}function om(){var e=W()(["To"]);return om=function(){return e},e}var im=function(e){var t=e.message.data,n=void 0===t?{}:t,r=e.onFocus;return i.a.createElement("div",{className:"flex flex-row flex-nowrap flex-items-center pl0-5 mb0-5",onClick:r},i.a.createElement(de.a,{htmlFor:null,className:"composer-meta-label color-pm-blue"},Object(Y.c)("Title").t(om())),i.a.createElement("div",{className:"flex flex-row w100"},i.a.createElement("span",{className:"flex-item-fluid bordered-container flex composer-addresses-fakefield"},i.a.createElement("span",{className:"ellipsis mw100"},["ToList","CCList","BCCList"].map((function(e){var t=n[e]||[];return 0===t.length?null:i.a.createElement(o.Fragment,{key:e},"CCList"===e&&i.a.createElement("span",{className:"mr0-5 color-pm-blue"},Object(Y.c)("Title").t(cm()),":"),"BCCList"===e&&i.a.createElement("span",{className:"mr0-5 color-pm-blue"},Object(Y.c)("Title").t(am()),":"),t.map((function(e,n){return i.a.createElement("span",{key:n,className:"mr0-5"},La(e),n!==t.length-1&&",")})))})))),i.a.createElement(If.a,{icon:"caret",className:"pm-button--link ml0-5 mr0-5 "})))},um=function(e){var t=e.message,n=e.onChange,r=e.addressesBlurRef,a=e.addressesFocusRef,c=Object(ho.a)(!0),u=c.state,s=c.set,l=Object(ho.a)(gc(t.data).length>0),f=l.state,m=l.set,d=l.toggle;Object(o.useEffect)((function(){r.current=function(){return s(!1)}}),[]);return u?i.a.createElement(rm,{message:t,onChange:n,expanded:f,toggleExpanded:d,addressesFocusRef:a}):i.a.createElement(im,{message:t,onFocus:function(){s(!0),m(!0),setTimeout((function(){a.current()}))}})},sm=function(e){var t,n,r=e.message,a=e.addresses,c=e.onChange,u=e.addressesBlurRef,s=e.addressesFocusRef,l=Object(o.useState)(Object(on.b)("composer")),f=_()(l,1)[0],m=a.map((function(e){return{text:e.Email,value:e.ID}}));return i.a.createElement("div",{className:"composer-meta w100"},i.a.createElement("div",{className:"flex flex-row flex-nowrap flex-items-center pl0-5 mb0-5"},i.a.createElement(de.a,{htmlFor:"from-".concat(f),className:"composer-meta-label"},"From"),i.a.createElement(pe.a,{id:"from-".concat(f),options:m,value:null===(t=r.data)||void 0===t?void 0:t.AddressID,onChange:function(e){var t=e.target.value,n=a.find((function(e){return e.ID===t})),r={Name:null==n?void 0:n.DisplayName,Address:null==n?void 0:n.Email};c({data:{AddressID:t,Sender:r}})},onFocus:u.current})),i.a.createElement(um,{message:r,onChange:c,addressesBlurRef:u,addressesFocusRef:s}),i.a.createElement("div",{className:"flex flex-row flex-nowrap flex-items-center pl0-5 mb0-5"},i.a.createElement(de.a,{htmlFor:"subject-".concat(f),className:"composer-meta-label"},"Subject"),i.a.createElement(Jf.a,{id:"subject-".concat(f),value:null===(n=r.data)||void 0===n?void 0:n.Subject,onChange:function(e){var t=e.target;c({data:{Subject:t.value}})},onFocus:u.current})))},lm=n("rmP6"),fm=n.n(lm),mm=n("kzlf"),dm=n.n(mm),pm=dm.a.import("blots/block");pm.tagName="div",dm.a.register(pm);var vm=function(e){var t=e.message,n=e.onChange,r=e.onFocus,a=e.contentFocusRef,c=Object(o.useRef)(null);Object(o.useEffect)((function(){var e;a.current=(null===(e=c.current)||void 0===e?void 0:e.focus)||Ta.c}),[]);return i.a.createElement("section",{className:"composer-content flex-item-fluid w100 mb1"},i.a.createElement(fm.a,{className:"composer-quill",value:t.content,onChange:function(e){n({content:e})},onFocus:r,ref:c}))};function bm(){var e=W()(["Permanently delete this draft?"]);return bm=function(){return e},e}function gm(){var e=W()(["Delete"]);return gm=function(){return e},e}var hm=function(e){var t=e.message,n=e.onSave,r=e.onSend,a=e.onDelete,c=Object(nt.a)(!1),o=_()(c,2),u=o[0],s=o[1],l=Object(cr.a)().createModal;return i.a.createElement("footer",{className:"composer-actions flex flex-row flex-spacebetween w100"},i.a.createElement("div",null,i.a.createElement(If.a,{icon:"attach"})," ",i.a.createElement(If.a,{icon:"expiration"})," ",i.a.createElement(If.a,{icon:"lock"})),i.a.createElement("div",{className:"flex-self-vcenter"},i.a.createElement("span",null,"Saved at ",Yc(_t(t.data))),i.a.createElement(If.a,{className:"ml1",icon:"trash",onClick:function(){return l(i.a.createElement(or.a,{onConfirm:a,onClose:Ta.c,title:Object(Y.c)("Title").t(gm())},i.a.createElement(ur.a,null,Object(Y.c)("Info").t(bm()))))}})," ",i.a.createElement(If.a,{icon:"save",onClick:n})," ",i.a.createElement(If.a,{className:"pm-button-blue",loading:u,onClick:function(){return s(r())}},"Send")))};function Em(){var e=W()(["Message discarded"]);return Em=function(){return e},e}function Om(){var e=W()(["Message sent"]);return Om=function(){return e},e}function jm(){var e=W()(["Message saved"]);return jm=function(){return e},e}function xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xm(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wm=function(e,t){return ym({},e,{},t,{data:ym({},e.data,{},t.data)})},Nm=function(e){var t,n=e.style,r=void 0===n?{}:n,a=e.focus,c=e.message,u=void 0===c?{}:c,s=e.mailSettings,l=e.addresses,f=e.onFocus,m=e.onChange,d=e.onClose,p=Object(ho.a)(!1),v=p.state,b=p.toggle,g=Object(ho.a)(!1),h=g.state,E=g.toggle,O=Object(o.useState)(u),j=_()(O,2),x=j[0],y=j[1],w=Object(nt.a)(!1),N=_()(w,2),k=N[0],A=N[1],C=of(u.data,s),D=_()(C,2),S=D[0],L=D[1],I=L.initialize,T=L.createDraft,P=L.saveDraft,R=L.send,M=L.deleteDraft,B=Object(Gf.a)(),F=_()(B,2),z=F[0],U=F[1],K=Object(Vn.a)().createNotification,H=Object(o.useRef)(Ta.c),V=Object(o.useRef)(Ta.c),G=Object(o.useRef)(Ta.c),W=k||!(null===(t=x.data)||void 0===t?void 0:t.ID)||!x.content;Object(o.useEffect)((function(){var e,t;k||(null===(e=S.data)||void 0===e?void 0:e.ID)||A(T(u)),!k&&(null===(t=S.data)||void 0===t?void 0:t.ID)&&void 0===S.initialized&&A(I()),y(wm(x,S)),m(S)}),[k,S]),Object(o.useEffect)((function(){!h&&U-Jm-Zm<Ym-Qm&&E(),h&&U-Jm-Zm>Ym+Qm&&E()}),[U]),Object(o.useEffect)((function(){W||setTimeout((function(){0===gc(S.data).length?V.current():G.current()}))}),[W]);var q=function(e){console.log("change",e),y(wm(x,e))},J=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(x);case 2:K({text:Object(Y.c)("Info").t(jm())});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(x);case 2:K({text:Object(Y.c)("Success").t(Om())}),d();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:K({text:Object(Y.c)("Info").t(Em())}),d();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v&&b(),f();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:d();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(e,t,n,r,a){return t?ym({},e,{height:"auto"}):n?ym({},e,{right:qm,width:r-qm-$m,height:a-2*Jm}):e}(r,v,h,z,U);return i.a.createElement("div",{className:Object(on.a)(["composer flex flex-column p0-5",!a&&"composer-blur",v&&"composer-minimized pb0"]),style:ne,onFocus:f,onClick:ee},W?i.a.createElement(X.a,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(qf,{message:x,minimized:v,maximized:h,toggleMinimized:b,toggleMaximized:E,onClose:te}),!v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(sm,{message:x,addresses:l,onChange:q,addressesBlurRef:H,addressesFocusRef:V}),i.a.createElement(vm,{message:x,onChange:q,onFocus:H.current,contentFocusRef:G}),i.a.createElement(hm,{message:x,onSave:Q,onSend:Z,onDelete:$}))))},km=(n("bDwr"),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=-1;return e.replace(/\n(\s+)/g,(function(e,n){return t<0&&(t=n.replace(/\t/g,"    ").length),"\n"+n.slice(Math.min(n.length,t))}))}var c=e.slice(0,n.length+1).map((function(e,t){return(0===t?"":n[t-1])+e})).join("");return a(c)});function Am(){var e=W()(['\n        <div class="'," ",'">\n            <div class="'," ",'">\n                ',"\n            </div>\n            ",'\n            <div class="'," ",'">\n                ',"\n            </div>\n        </div>\n    "]);return Am=function(){return e},e}var Cm=function(e){return 0===e.PMSignature?"":be.U},Dm=function(e){return!e||"<div><br /></div>"===e||"<div><br></div>"===e},Sm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?'<div class="'.concat(e,'">'):"<div>";return"".concat(t,"<br /></div>")},Lm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Dm(e),a=r&&!t;return{start:a?Sm():Sm()+Sm(),end:n?Sm():"",between:!r&&t?Sm():""}},Im=function(e,t){var n=Dm(e),r=!t;return{userClass:n?"protonmail_signature_block-empty":"",protonClass:r?"protonmail_signature_block-empty":"",containerClass:n&&r?"protonmail_signature_block-empty":""}},Tm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Cm(t),c=Im(e,a),o=c.userClass,i=c.protonClass,u=c.containerClass,s=Lm(e,a,n),l=km(Am(),"protonmail_signature_block",u,"protonmail_signature_block-user",o,Ji(e),s.between,"protonmail_signature_block-proton",i,Ji(a));return r?lu(l):"".concat(s.start).concat(lu(l)).concat(s.end)},Pm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=a?"beforeend":"afterbegin",o=Tm(t,r,n!==pt.NEW),i=du(e);return i.insertAdjacentHTML(c,o),i.innerHTML};function Rm(){var e=W()(["On ",", "," wrote:"]);return Rm=function(){return e},e}function Mm(){var e=W()(["Fw:"]);return Mm=function(){return e},e}function Bm(){var e=W()(["Re:"]);return Bm=function(){return e},e}var Fm=Object(Y.c)("Message").t(Bm()),zm=Object(Y.c)("Message").t(Mm()),Um=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new RegExp("^".concat(t),"i");return n.test(e)?e:"".concat(t," ").concat(e)},_m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=(t=void 0===t?{}:t).Subject,r=void 0===n?"":n,a=t.ToList,c=void 0===a?[]:a,o=t.CCList,i=void 0===o?[]:o,u=t.BCCList,s=void 0===u?[]:u,l=e.encryptedSubject,f=void 0===l?"":l,m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{Subject:m?f:r,ToList:c,CCList:i,BCCList:s}},Km=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=Um(a?r.encryptedSubject:null===(e=r.data)||void 0===e?void 0:e.Subject,Fm),o=ac(r.data)||cc(r.data)?null===(t=r.data)||void 0===t?void 0:t.ToList:null===(n=r.data)||void 0===n?void 0:n.ReplyTos;return{Subject:c,ToList:o}},Hm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=e.data,a=void 0===r?{}:r,c=e.encryptedSubject,o=void 0===c?"":c,i=Um(t?o:a.Subject,Fm);if(ac(e.data)||cc(e.data))return{Subject:i,ToList:a.ToList,CCList:a.CCList,BCCList:a.BCCList};var u=a.ReplyTos,s=n.map((function(e){var t=e.Email;return(void 0===t?"":t).toLowerCase()})),l=Object(Cc.d)([].concat(Xe()(a.ToList||[]),Xe()(a.CCList||[]))),f=l.filter((function(e){var t=e.Address,n=void 0===t?"":t;return!s.includes(n.toLowerCase())}));return{Subject:i,ToList:u,CCList:f}},Vm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?{}:t,r=e.encryptedSubject,a=void 0===r?"":r,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Um(c?a:n.Subject,zm);return{Subject:o,ToList:[]}},Xm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=!!t.encryptedSubject;switch(e){case pt.NEW:return _m(t,r);case pt.REPLY:return Km(t,r);case pt.REPLY_ALL:return Hm(t,r,n);case pt.FORWARD:return Vm(t,r)}},Gm=function(e){var t,n,r=qc(null===(t=e.data)||void 0===t?void 0:t.Time),a=qs(null===(n=e.data)||void 0===n?void 0:n.Sender),c=Object(Y.c)("Message").t(Rm(),r,a),o=e.content;return" Original Message <br>\n        ".concat(c,'<br>\n        <blockquote class="protonmail_quote" type="cite">\n            ').concat(o,"\n        </blockquote><br>")};function Wm(){var e=W()(["Maximum composer reached"]);return Wm=function(){return e},e}var Ym=520,qm=20,Jm=10,Qm=20,Zm=80,$m=45,ed=function(e,t,n,r){var a=r-Jm-Zm;return{right:n[e],zIndex:t?301:300,height:a>Ym?Ym:a}},td=function(e){return e.existingDraft?e:void 0},nd=function(e){return"number"==typeof e.action?e:void 0},rd=function(e){var t=e.children,n=Object(K.a)(),r=_()(n,2),a=r[0],c=r[1],u=Object(zs.a)(),s=_()(u,2),l=s[0],f=s[1],m=Object(o.useState)([]),d=_()(m,2),p=d[0],v=d[1],b=Object(o.useState)(),g=_()(b,2),h=g[0],E=g[1],O=Object(Gf.a)(),j=_()(O,2),x=j[0],y=j[1],w=Object(Vn.a)().createNotification;if(c||f)return null;var N=function(e){return function(){var t=p.filter((function(t){return t!==e}));v(t),t.length>0&&E(t[0])}},k=function(e){return function(){E(e)}},A=function(e,t){if(600*e+qm*(e+1)<t)return Object(Cc.c)(0,e).map((function(e){return 600*e+qm*(e+1)}));var n=(t-2*qm-600)/(e-1);return Object(Cc.c)(0,e).map((function(e){return qm+n*e}))}(p.length,x);return i.a.createElement(i.a.Fragment,null,t({onCompose:function(e){if(p.length>=3)w({type:"error",text:Object(Y.c)("Error").t(Wm())});else{var t=function(e){return{composeExisting:td(e),composeNew:nd(e)}}(e),n=t.composeExisting,r=t.composeNew;if(console.log("compose",n,r),n){var c=n.existingDraft,o=p.find((function(e){var t,n;return(null===(t=e.data)||void 0===t?void 0:t.ID)===(null===(n=c.data)||void 0===n?void 0:n.ID)}));return o?void E(o):(v([].concat(Xe()(p),[c])),void E(c))}if(r){var i=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=(null===(t=r.data)||void 0===t?void 0:t.MIMEType)||a.DraftMIMEType,i=a.RightToLeft,u=0;a.AttachPublicKey&&(u=Object(Ia.c)(u,Pt)),a.Sign&&(u=Object(Ia.c)(u,Rt));var s=Xm(e,r,c),l=s.Subject,f=s.ToList,m=void 0===f?[]:f,d=s.CCList,p=void 0===d?[]:d,v=s.BCCList,b=void 0===v?[]:v,g=r.originalTo,h=Js(c,r.data)||{},E=h.ID,O={Name:h.DisplayName,Address:h.Email},j=[],x=e===pt.NEW?"":Gm(r),y=e===pt.NEW?void 0:null===(n=r.data)||void 0===n?void 0:n.ID;return{data:{ToList:m,CCList:p,BCCList:b,Subject:l,PasswordHint:"",ExpirationTime:0,ExpiresIn:0,Attachments:j,MIMEType:o,RightToLeft:i,Flags:u,Sender:O,AddressID:E,ParentID:y},content:x=Pm(x,h.Signature,e,a),action:e,originalTo:g}}(r.action,r.referenceMessage,a,l);v([].concat(Xe()(p),[i])),E(i)}}}}),i.a.createElement("div",{className:"composer-container"},p.map((function(e,t){var n,r;return i.a.createElement(Nm,{key:(null===(n=e.data)||void 0===n?void 0:n.ID)||t,style:ed(t,e===h,A,y),message:e,focus:e===h,mailSettings:a,addresses:l,onFocus:k(e),onChange:(r=e,function(e){var t=Xe()(p);t[t.indexOf(r)]=e,v(t),r===h&&E(e)}),onClose:N(e)})}))))},ad=function(e){var t=e.onLogout;return i.a.createElement(C.a,{onLogout:t,locales:z,preloadModels:[D.a,S.a],eventModels:[D.a,L.a,I.a,T.a,P.a,S.a,R.a,M.a,B.a]},i.a.createElement(Fs,null,i.a.createElement(rd,null,(function(e){var t=e.onCompose;return i.a.createElement(A.a,{path:"/:labelID/:elementID?",render:function(e){return i.a.createElement(Xf,k()({},e,{onCompose:t}))}})}))))},cd=n("jKe7"),od=n("plUg"),id=n("rDTT"),ud=n("7rSm"),sd=n("dNXc"),ld=n("Go4V"),fd=function(e){var t=e.children;return i.a.createElement(i.a.Fragment,null,i.a.createElement("main",{className:"main-full flex flex-column flex-nowrap reset4print"},t),i.a.createElement(ld.a,null))},md=n("oiES"),dd=n("xpwl");function pd(){var e=W()(["Contact support"]);return pd=function(){return e},e}function vd(){var e=W()(["Common login problems"]);return vd=function(){return e},e}function bd(){var e=W()(["Forgot username?"]);return bd=function(){return e},e}function gd(){var e=W()(["Reset password"]);return gd=function(){return e},e}function hd(){var e=W()(["Need help?"]);return hd=function(){return e},e}function Ed(){var e=W()(["User log in"]);return Ed=function(){return e},e}function Od(){var e=W()(["Log in"]);return Od=function(){return e},e}var jd=function(e){var t=e.stopRedirect,n=e.history,r=e.onLogin;return i.a.createElement(md.a,{title:Object(Y.c)("Title").t(Od())},i.a.createElement("h2",null,Object(Y.c)("Title").t(Ed())),i.a.createElement(dd.a,{onLogin:function(){t(),n.push("/inbox"),r.apply(void 0,arguments)},needHelp:i.a.createElement(fe.a,{content:Object(Y.c)("Dropdown button").t(hd()),className:"pm-button--link"},i.a.createElement(Bn.a,null,i.a.createElement("div",{className:"inbl w100 pt0-5 pb0-5 ellipsis"},i.a.createElement(Dc.a,{to:"/reset-password"},Object(Y.c)("Link").t(gd()))),i.a.createElement("div",{className:"inbl w100 pt0-5 pb0-5 ellipsis"},i.a.createElement(Dc.a,{to:"/forgot-username"},Object(Y.c)("Link").t(bd()))),i.a.createElement("div",{className:"inbl w100 pt0-5 pb0-5 ellipsis"},i.a.createElement(Q.a,{url:"https://protonmail.com/support/knowledge-base/common-login-problems/"},Object(Y.c)("Link").t(vd()))),i.a.createElement("div",{className:"inbl w100 pt0-5 pb0-5 ellipsis"},i.a.createElement(Q.a,{url:"https://protonmail.com/support/"},Object(Y.c)("Link").t(pd())))))}))},xd=n("17x9"),yd=n.n(xd),wd=function(e){e.match,e.history,e.onLogin,e.stopRedirect;return i.a.createElement(i.a.Fragment,null,"SignupContainer")};wd.propTypes={stopRedirect:yd.a.func.isRequired,onLogin:yd.a.func.isRequired,match:yd.a.shape({params:yd.a.shape({step:yd.a.string})}).isRequired,history:yd.a.shape({push:yd.a.func.isRequired,location:yd.a.shape({search:yd.a.string.isRequired,state:yd.a.oneOfType([yd.a.shape({selector:yd.a.string.isRequired,token:yd.a.string.isRequired}),yd.a.shape({Coupon:yd.a.shape({Code:yd.a.string})})])}).isRequired}).isRequired};var Nd=wd,kd=n("mLw1"),Ad=function(e){var t=e.onLogin,n=Object(o.useRef)(!1),r=function(){return n.current=!0},a=Object(o.useState)(!0),c=_()(a,2),u=c[0],s=c[1],l=Object(o.useState)(!1),f=_()(l,2),m=f[0],d=f[1];return Object(o.useLayoutEffect)((function(){tt()($e.a.mark((function e(){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(sd.a)()]);case 2:case"end":return e.stop()}}),e)})))().then((function(){return s(!1)})).catch((function(){return d(!0)}))}),[]),m?"OpenPGP failed to load. Handle better.":u?i.a.createElement(X.a,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(od.a,null),i.a.createElement(fd,null,i.a.createElement(cd.a,null,i.a.createElement(A.a,{path:"/reset-password",render:function(){return i.a.createElement(id.a,{onLogin:t})}}),i.a.createElement(A.a,{path:"/forgot-username",component:ud.a}),i.a.createElement(A.a,{path:"/login",render:function(e){var n=e.history,a=e.location;return i.a.createElement(jd,{stopRedirect:r,history:n,location:a,onLogin:t})}}),i.a.createElement(A.a,{path:"/signup/:step?",render:function(e){var n=e.history,a=e.match;return i.a.createElement(Nd,{stopRedirect:r,history:n,match:a,onLogin:t})}}),i.a.createElement(A.a,{render:function(e){var t=e.location;return n.current?null:i.a.createElement(kd.a,{to:{pathname:"/login",state:{from:t}}})}}))))},Cd=(n("wdeV"),function(){var e=Object(s.a)(),t=e.UID,n=e.login,r=e.logout;return t?i.a.createElement(ad,{onLogout:r}):i.a.createElement(Ad,{onLogin:n})}),Dd=Object(u.hot)((function(){return i.a.createElement(l.a,{config:r},i.a.createElement(Cd,null))}));c.a.render(i.a.createElement(Dd,null),document.querySelector(".app-root"))},0:function(e,t,n){n("+wUL"),e.exports=n("1UW9")},"0u2a":function(e,t,n){},1:function(e,t){},2:function(e,t){},3:function(e,t){},"36vJ":function(e,t,n){},4:function(e,t){},5:function(e,t){},"5FMj":function(e,t,n){var r={"./3-d-secure.svg":"0gKn","./american-express-safekey.svg":"Jui7","./cc-american-express.svg":"/qD2","./cc-dankort.svg":"0T0d","./cc-diners-club.svg":"vuvo","./cc-discover.svg":"AZZk","./cc-forbrugs.svg":"k2eZ","./cc-jcb.svg":"7Amw","./cc-maestro.svg":"lXKh","./cc-mastercard.svg":"ZUPP","./cc-paypal.svg":"egYP","./cc-unionpay.svg":"ma7A","./cc-visa.svg":"vO2o","./cc-visaelectron.svg":"RMFI","./discover-protectbuy.svg":"qsy5","./mastercard-securecode.svg":"6Bn0","./verified-by-visa.svg":"Q7qE"};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id="5FMj"},A5oT:function(e,t,n){},YO3j:function(e,t,n){var r={"./af/index.js":["IqAn",11],"./ar-DZ/index.js":["JVC1",12],"./ar-SA/index.js":["xMju",13],"./be/index.js":["YEhR",3],"./bg/index.js":["isx8",4],"./bn/index.js":["+b7I",14],"./ca/index.js":["Vwa+",15],"./cs/index.js":["dvhP",16],"./cy/index.js":["HQUR",17],"./da/index.js":["7ur/",18],"./de/index.js":["bgw5",19],"./el/index.js":["dH0v",20],"./en-AU/index.js":["VHew",21],"./en-CA/index.js":["wXhn",22],"./en-GB/index.js":["nwJ3",23],"./en-US/index.js":["IogR",24],"./eo/index.js":["UB7v",25],"./es/index.js":["/S0t",26],"./et/index.js":["Br0m",27],"./fa-IR/index.js":["gEFy",28],"./fi/index.js":["ndVD",29],"./fr-CA/index.js":["KTij",30],"./fr/index.js":["LKA2",31],"./gl/index.js":["4bge",32],"./gu/index.js":["3t4y",33],"./he/index.js":["75M+",34],"./hi/index.js":["CUe2",35],"./hr/index.js":["L9Jq",36],"./hu/index.js":["Nm+E",37],"./hy/index.js":["netp",38],"./id/index.js":["A6C3",39],"./is/index.js":["N4bE",40],"./it/index.js":["hmb4",41],"./ja/index.js":["uAXs",42],"./ka/index.js":["pwL5",43],"./kk/index.js":["zGPi",5],"./ko/index.js":["iW8+",44],"./lt/index.js":["xj+b",45],"./lv/index.js":["x5pY",6],"./ms/index.js":["gUWk",46],"./nb/index.js":["73vv",47],"./nl/index.js":["hCQt",48],"./nn/index.js":["vORL",49],"./pl/index.js":["B6yL",7],"./pt-BR/index.js":["2dYp",50],"./pt/index.js":["gdks",51],"./ro/index.js":["r2yp",52],"./ru/index.js":["nz/o",8],"./sk/index.js":["Wqan",9],"./sl/index.js":["KYSo",53],"./sr/index.js":["7mU3",54],"./sv/index.js":["hxgj",55],"./ta/index.js":["1ssA",56],"./te/index.js":["SGoj",57],"./th/index.js":["Pk+z",58],"./tr/index.js":["3ZWG",59],"./ug/index.js":["yT3n",60],"./uk/index.js":["LCGg",10],"./vi/index.js":["dGQT",61],"./zh-CN/index.js":["UJqf",62],"./zh-TW/index.js":["zn9v",63]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="YO3j",e.exports=a},"aM+n":function(e,t,n){},bDwr:function(e,t,n){},dTS7:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="dTS7"},ncOH:function(e,t,n){},wdeV:function(e,t,n){},z3V7:function(e,t,n){}});
//# sourceMappingURL=index.1f385bda.js.map